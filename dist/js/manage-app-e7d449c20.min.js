/*!
 LivelyCart-2
 version: 2.2.0
 --------------------------------------------------------------------- 
 Build Timestamp: 1502367837
 Build Date: Thu Aug 10 2017 17:53:57 GMT+0530 (IST)
--------------------------------------------------------------------- */
!function(){"use strict";function e(e,t,a){a.startSymbol("[["),a.endSymbol("]]"),t.otherwise("/dashboard"),e.state("home",__globals.stateConfig("/home","home",{access:{designation:1}})).state("dashboard",__globals.stateConfig("/dashboard","dashboard/details",{access:{designation:1}})).state("profile",__globals.stateConfig("/profile","user/manage-profile",{access:{designation:1}})).state("profileEdit",__globals.stateConfig("/profile/edit","user/profile-edit",{access:{designation:1}})).state("changePassword",__globals.stateConfig("/change-password","user/change-password",{access:{designation:1}})).state("changeEmail",__globals.stateConfig("/change-email","user/change-email",{access:{designation:1}})).state("users",__globals.stateConfig("/users","user/manage/list",{access:{designation:1}})).state("categories",__globals.stateConfig("/categories/:mCategoryID?","category/list",{access:{designation:1}})).state("products",__globals.stateConfig("/products/:mCategoryID?/:brandID?","product/manage/list",{access:{designation:1}})).state("categories.add",__globals.stateConfig("^/categories/add/:mCategoryID?",null,{controller:"CategoryAddDialogController",access:{designation:1}})).state("categories.edit",__globals.stateConfig("^/categories/:catID/edit",null,{controller:"CategoryEditDialogController",access:{designation:1}})).state("brands",__globals.stateConfig("/brands","brand/manage/list",{access:{designation:1}})).state("brands.add",__globals.stateConfig("/add",null,{controller:"BrandAddDialogController",access:{designation:1}})).state("brands.edit",__globals.stateConfig("/:brandID/edit",null,{controller:"BrandEditDialogController",access:{designation:1}})).state("coupons",__globals.stateConfig("/coupons","coupon/manage/list",{access:{designation:1}})).state("coupons.current",__globals.stateConfig("/current","coupon/manage/list",{access:{designation:1}})).state("coupons.expired",__globals.stateConfig("/expired","coupon/manage/list",{access:{designation:1}})).state("coupons.upcoming",__globals.stateConfig("/up-coming","coupon/manage/list",{access:{designation:1}})).state("shippings",__globals.stateConfig("/shipping","shipping/manage/list",{access:{designation:1}})).state("shippings.add",__globals.stateConfig("/add",null,{controller:"ShippingAddDialogController",access:{designation:1}})).state("shippings.edit",__globals.stateConfig("/:shippingID/edit",null,{controller:"ShippingEditDialogController",access:{designation:1}})).state("taxes",__globals.stateConfig("/taxes","tax/manage/list",{access:{designation:1}})).state("taxes.add",__globals.stateConfig("/add",null,{controller:"TaxAddDialogController",access:{designation:1}})).state("taxes.edit",__globals.stateConfig("/:taxID/edit",null,{controller:"TaxEditDialogController",access:{designation:1}})).state("product_add",__globals.stateConfig("/product/add","product/manage/add",{access:{designation:1}})).state("category_product_add",__globals.stateConfig("/product/add/:categoryID","product/manage/add",{access:{designation:1}})).state("product_edit",__globals.stateConfig("/product/:productID/edit","product/manage/edit",{access:{designation:1}})).state("product_edit.details",__globals.stateConfig("/details","product/manage/edit-details",{access:{designation:1}})).state("product_edit.options",__globals.stateConfig("/options","product/manage/options/list",{access:{designation:1}})).state("product_edit.specification",__globals.stateConfig("/specification","product/manage/specification/list",{access:{designation:1}})).state("pages",__globals.stateConfig("/pages/:parentPageID?","pages/manage/list",{access:{designation:1}})).state("pages.add",__globals.stateConfig("^/pages/add/",null,{controller:"ManagePagesAddDialogController",access:{designation:1}})).state("pages.edit",__globals.stateConfig("^/pages/:pageID/edit",null,{controller:"ManagePagesEditDialogController",access:{designation:1}})).state("page_details",__globals.stateConfig("/details/:pageID/:pageTitle","pages/manage/details",{access:{designation:1}})).state("store_settings_edit",__globals.stateConfig("/setting","store/edit_settings",{access:{designation:1}})).state("store_settings_edit.general",__globals.stateConfig("/general",null,{access:{designation:1}})).state("store_settings_edit.product",__globals.stateConfig("/product",null,{access:{designation:1}})).state("store_settings_edit.placement",__globals.stateConfig("/placements",null,{access:{designation:1}})).state("store_settings_edit.currency",__globals.stateConfig("/currency",null,{access:{designation:1}})).state("store_settings_edit.order",__globals.stateConfig("/order",null,{access:{designation:1}})).state("store_settings_edit.contact",__globals.stateConfig("/contact",null,{access:{designation:1}})).state("store_settings_edit.term_condition",__globals.stateConfig("/users",null,{access:{designation:1}})).state("store_settings_edit.privacy_policy",__globals.stateConfig("/privacy-policy",null,{access:{designation:1}})).state("store_settings_edit.social",__globals.stateConfig("/social",null,{access:{designation:1}})).state("store_settings_edit.language",__globals.stateConfig("/language",null,{access:{designation:1}})).state("store_settings_edit.css-style",__globals.stateConfig("/css-style",null,{access:{designation:1}})).state("product_edit.images",__globals.stateConfig("/images","product/manage/Images/list",{access:{designation:1}})).state("orders",__globals.stateConfig("/orders","order/manage/list",{access:{designation:1}})).state("orders.active",__globals.stateConfig("/active/:userID?","order/manage/list",{access:{designation:1}})).state("orders.cancelled",__globals.stateConfig("/cancelled/:userID?","order/manage/list",{access:{designation:1}})).state("orders.completed",__globals.stateConfig("/completed/:userID?","order/manage/list",{access:{designation:1}})).state("order_details",__globals.stateConfig("/order/:orderId/details","order/manage/details-view",{access:{designation:1}})).state("reports",__globals.stateConfig("/report","report/manage/list",{access:{designation:1}})).state("payments",__globals.stateConfig("/payments","order/manage/payment-list",{access:{designation:1}})).state("invalid_request",__globals.stateConfig("/invalid-request","errors/invalid-request")).state("not_found",__globals.stateConfig("/not-found","errors.manage-not-exist")).state("not_exist",__globals.stateConfig("/not-exist","errors.manage-not-exist")).state("unauthorized",__globals.stateConfig("/unauthorized","errors.unauthorized",{access:{}}))}angular.module("ManageApp",["ngMessages","ngAnimate","ngSanitize","ui.router","ngNotify","ngDialog","angularFileUpload","angular-loading-bar","selectize","NgSwitchery","lw.core.utils","lw.security.main","lw.auth","lw.data.datastore","lw.data.datatable","lw.form.main","app.service","app.http","app.notification","app.form","app.fancytree","app.directives","ManageApp.master","UserApp.manage","UserApp.manageUserChangePassword","ManageApp.userDetailDialog","UserApp.profile","UserApp.profileEdit","UserApp.changePassword","UserApp.changeEmail","ManageApp.category","ManageApp.categoryAddDialog","ManageApp.categoryAdd","ManageApp.categoryEditDialog","ManageApp.categoryEdit","ManageApp.categoryDelete","ManageApp.brand","ManageApp.brandDetailDialog","ManageApp.brandAddDialog","ManageApp.brandAdd","ManageApp.brandEditDialog","ManageApp.brandEdit","ManageApp.coupon","ManageProductApp.details","ManageProductApp.add","ManageProductApp.uploadedMedia","ManageProductApp.edit","ManageProductApp.editDetails","ManageApp.shipping","ManageApp.tax","ManageApp.report","ManageProductApp.images","ManageProductApp.addImage","ManageProductApp.editImage","ManageProductApp.options","ManageProductApp.addOption","ManageProductApp.editOption","ManageProductApp.addOptionValues","ManageProductApp.optionValues","ManageProductApp.specification","ManageProductApp.addSpecification","ManageProductApp.editSpecification","ManagePagesApp.list","ManagePagesApp.add","ManagePagesApp.add.dialog","ManagePagesApp.edit.dialog","ManagePagesApp.edit","ManagePagesApp.page.details","manageApp.storeSettingsEdit","manageApp.GeneralSettings","manageApp.CurrencySettings","manageApp.OrderSettings","manageApp.ProductSettings","manageApp.PlacementSettings","manageApp.ContactSettings","manageApp.termAndConditionSettings","manageApp.privacyPolicySettings","manageApp.socialSettings","ManageApp.orderList","ManageApp.orderUpdate","ManageApp.orderCancel","ManageApp.orderLogList","ManageApp.orderDialogList","ManageApp.payment","ManageApp.paymentDetailsDialog","ManageApp.rawDataDialog","ManageApp.orderPaymentUpdate","ManageApp.orderPaymentRefund","ManageApp.orderContact","uploadManagerEngine","DashboardApp.main","ManageApp.brandDeleteDialog","ManageApp.productList","ManageApp.orderDetails","ManageApp.orderDelete","ManageApp.paymentDelete","manageApp.CssStyleSettings"]).run(["__Auth","$state","$rootScope",function(e,t,a){e.verifyRoute(t),a.__ngSupport=window.__ngSupport}]).config(["$stateProvider","$urlRouterProvider","$interpolateProvider",e])}(),function(){"use strict";function e(e,t,a,o,n,s){var r=this;r.pageStatus=!1,o.refresh(function(e){r.auth_info=e}),e.$on("update.new.order.placed.count",function(e,t){r.newOrderPlacedCount=t.newOrderPlacedCount}),r.unhandledError=function(){s.error(__globals.getReactionMessage(19))},e.$on("lw.page.css_styles",function(e,t){r.pageCSSStyles=t.header_bg_color}),e.$on("lw.events.state.change_start",function(){if(n.closeAllDialog(),document.querySelector(".show-sweet-alert")){var e=$(".sweet-close");$(e).trigger("click")}r.currentStateStatus=!1}),e.$on("lw.auth.event.reset",function(e,t){r.auth_info=t}),e.$on("lw.form.event.process.started",function(e,t){$('button[type="submit"] span').addClass("fa fa-spinner fa-spin"),$("a, button").prop("disabled",!0),$('button[type="submit"]').prop("disabled",!0)}),e.$on("lw.form.event.process.finished",function(e,t){$('button[type="submit"] span').removeClass("fa fa-spinner fa-spin"),$('button[type="submit"]').prop("disabled",!1),$("a, button").prop("disabled",!1)}),e.$on("lw.form.event.fetch.started",__globals.showFormLoader),e.$on("lw.datastore.event.fetch.finished",__globals.hideFormLoader),e.$on("lw.form.event.process.error",r.unhandledError),e.$on("lw.datastore.event.fetch.error",r.unhandledError),r.showUploadManagerDialog=function(){n.showDialog(r,{templateUrl:__globals.getTemplateURL("upload-manager.upload-manager-dialog")},function(e){})},CKEDITOR.plugins.add("UploadManager",{init:function(e){e.ui.addButton("UploadManager",{label:"Upload Files",command:"UploadManagerDialog",icon:"../imgs/ckeditor/upload-manager.png",toolbar:"insert"});e.addCommand("UploadManagerDialog",{exec:r.showUploadManagerDialog})}}),r.openHelpDailog=function(e,t){r.templateTitle=t,n.showDialog(r,{templateUrl:__globals.getTemplateURL(e)},function(e){})}}function t(e,t){var a=this;a.templateTitle=t.ngDialogData.templateTitle,a.closeDialog=function(){t.closeThisDialog()}}angular.module("ManageApp.master",[]).controller("ManageController",["$rootScope","__DataStore","$scope","__Auth","appServices","appNotify",e]).controller("HelpController",["$rootScope","$scope",t])}(),function(e,t,a){"use strict";t.module("uploadManagerEngine",[]).controller("UploadManagerController",["__DataStore","appServices",function(e,t){}]).controller("UploadManagerDialogController",["__DataStore","appServices","FileUploader","__Utils","$scope",function(e,t,a,o,n){var s=this,r=s.uploader=new a({url:o.apiURL("upload_manager.upload"),autoUpload:!0,headers:{"X-XSRF-TOKEN":o.getXSRFToken()}});s.close=function(){n.closeThisDialog()},s.getFiles=function(){e.fetch("upload_manager.files",{fresh:!0}).success(function(e){t.processResponse(e,null,function(){s.files=e.data.files})})},s.getFiles(),r.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),r.onCompleteItem=function(e,a,o,n){t.processResponse(a,null,function(){})},r.onCompleteAll=function(){s.getFiles()},s.selectImage=function(e){var t='<img src="'+e+'"/>';CKEDITOR.instances.description.insertHtml(t),s.close()},s.selectDocument=function(e,t){var a='<a href="'+e+'"/>'+t+"</a>";CKEDITOR.instances.description.insertHtml(a),s.close()},s.delete=function(a){e.post({apiURL:"upload_manager.delete",fileName:a}).success(function(e){t.processResponse(e,null,function(){s.getFiles()})})}}])}(window,window.angular),function(){"use strict";function e(e,t,a){var o=[{name:"name",template:"#userNameColumnTemplate",orderable:!0},{name:"email",orderable:!0},{name:"creation_date",orderable:!0},{name:"last_login",orderable:!0},{name:null,template:"#userActionColumnTemplate"}],n={active:{id:"activeUsersTabList",status:1},deleted:{id:"deletedUsersTabList",status:5},never_activated:{id:"neverActivatedUsersTabList",status:4}},s=this;$("#manageUsersTabs a").click(function(e){e.preventDefault();var t=$(this),a=t.attr("aria-controls"),o=n[a];_.isEmpty(o)||($(this).tab("show"),s.getUsers(o.id,o.status))}),s.getUsers=function(a,n){s.usersListDataTable&&s.usersListDataTable.destroy(),s.usersListDataTable=t.dataTable("#"+a,{url:{apiURL:"manage.users.list",status:n},dtOptions:{searching:!0},columnsData:o,scope:e})},s.getUsers("activeUsersTabList",1),s.reloadDT=function(){t.reloadDT(s.usersListDataTable)},s.delete=function(e,o){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("user_delete_confirm_text"),{__name__:unescape(o)}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.user.delete",userID:e}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"error"})}},function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"success"}),s.reloadDT()})})})},s.restore=function(e,o){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("user_restore_confirm_text"),{__name__:o}),confirmButtonText:__globals.getJSString("restore_action_button_text")},function(){t.post({apiURL:"manage.user.restore",userID:e}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(){__globals.showConfirmation({title:"Restore!",text:t,type:"error"})}},function(){__globals.showConfirmation({title:"Restore!",text:t,type:"success"}),s.reloadDT()})})})},s.changePassword=function(e,t){a.showDialog({userID:e,name:unescape(t)},{templateUrl:__globals.getTemplateURL("user.manage.change-password")},function(e){})},s.getUserDetails=function(e){t.fetch({apiURL:"manage.users.get.detail",userID:e}).success(function(e){e.data;a.processResponse(e,null,function(){a.showDialog(e.data,{templateUrl:__globals.getTemplateURL("user.manage.user-details")},function(e){})})})},s.contactDialog=function(e){a.showDialog({userId:e},{templateUrl:__globals.getTemplateURL("user.manage.contact")},function(e){})},s.addNewUser=function(e){a.showDialog(s,{templateUrl:__globals.getTemplateURL("user.manage.add")},function(e){_.has(e.value,"user_added")&&1==e.value.user_added&&s.reloadDT()})}}function t(e,t,a,o){var n=this;n=t.setup(n,"add_new_user_form","userData"),n.submit=function(){t.process("manage.user.add",n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({user_added:!0})})})},n.closeDialog=function(){e.closeThisDialog({user_added:!1})}}function a(e,t,a,o){var n=this;n=t.setup(n,"contact_form","userData",{secured:!0,unsecuredFields:["message"]}),n.ngDialogData=e.ngDialogData,o.fetch({apiURL:"user.get.info",userId:n.ngDialogData.userId}).success(function(e){var o=e.data;a.processResponse(e,null,function(){n.userData=o,n=t.updateModel(n,n.userData)})}),n.submit=function(){t.process("manage.user.contact.process",n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog()})})},n.closeDialog=function(){e.closeThisDialog()}}angular.module("UserApp.manage",[]).controller("ManageUsersController",["$scope","__DataStore","appServices",e]).controller("UserAddController",["$scope","__Form","appServices","__DataStore",t]).controller("ContactController",["$scope","__Form","appServices","__DataStore",a])}(),function(){"use strict";function e(e,t,a){var o=this;o=t.setup(o,"change_password_form","changePasswordData",{secured:!0}),o.ngDialogData=e.ngDialogData,o.title=__ngSupport.getText(__globals.getJSString("user_change_password_title_text"),{__name__:unescape(o.ngDialogData.name)}),o.userID=o.ngDialogData.userID,o.submit=function(){t.process({apiURL:"manage.user.change_password.process",userID:o.userID},o).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog()})})},o.closeDialog=function(){e.closeThisDialog()}}angular.module("UserApp.manageUserChangePassword",[]).controller("ManageUserChangePasswordController",["$scope","__Form","appServices",e])}(),function(){"use strict";function e(e){var t=this;t.ngDialogData=e.ngDialogData,t.userDetails=t.ngDialogData,t.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.userDetailDialog",[]).controller("ManageUserDetailsDialog",["$scope",e])}(),function(){"use strict";angular.module("UserApp.profile",[]).controller("UserProfileController",["__Form","appServices",function(e,t){var a=this;a=e.setup(a,"user_profile__form","profileData"),a.request_completed=!1,e.fetch("user.profile.details").success(function(o){t.processResponse(o,null,function(){e.updateModel(a,o.data.profile),a.request_completed=!0})})}])}(),function(){"use strict";angular.module("UserApp.profileEdit",[]).controller("UserProfileEditController",["__Form","appServices",function(e,t){var a=this;a=e.setup(a,"user_profile_edit_form","profileData"),a.request_completed=!1,e.fetch("user.profile.details").success(function(o){t.processResponse(o,null,function(){e.updateModel(a,o.data.profile),a.request_completed=!0})}),a.submit=function(){e.process("user.profile.update",a).success(function(e){t.processResponse(e,null,function(){})})}}])}(),function(){"use strict";angular.module("UserApp.changePassword",[]).controller("UserChangePasswordController",["__Form","appServices","__Utils","$state",function(e,t,a,o){var n=this;n=e.setup(n,"user_password_update_form","userData",{secured:!0}),n.submit=function(){e.process("user.change_password.process",n).success(function(e){t.processResponse(e,null,function(){n.userData={},document.location.href==e.data.passwordRoute?window.location=window.appConfig.appBaseURL:o.go("dashboard")})})}}])}(),function(){"use strict";angular.module("UserApp.changeEmail",[]).controller("UserChangeEmailController",["__Form","appServices",function(e,t){var a=this;a.requestSuccess=!1,a.pageStatus=!1,a=e.setup(a,"user_change_email_form","userData",{secured:!0}),e.fetch("user.change_email.support_data").success(function(e){var o=e.data;t.processResponse(e,null,function(){a.changeEmail=o.newEmail,a.formattedDate=o.formattedDate,a.humanReadableDate=o.humanReadableDate,a.pageStatus=!0})}),a.submit=function(){e.process("user.change_email.process",a).success(function(e){var o=e.data;t.processResponse(e,null,function(){a.userData={},1==e.reaction&&(a.activationRequired=o.activationRequired,a.requestSuccess=!0,$(".lw-form").slideUp())})})}}])}(),function(){"use strict";function e(e,t,a,o,n){var s=this,r=_.isEmpty(o.params.mCategoryID)?null:o.params.mCategoryID,i=o.current.name;s.currentStateName=i,s.pageContentLoaded=!1,s.parentCategoryExist=!1,s.categoryID=r,s.dtCategoriesColumnsData=[{name:"name",orderable:!0,template:"#categoriesColumnActionSubcategories"},{name:"status",orderable:!0,template:"#categoriesColumnStatus"},{name:null,template:"#categoriesColumnActionAddcategory"},{name:null,template:"#categoriesColumnActionAddProduct"},{name:null,template:"#categoriesColumnActionTemplate"}];s.getCategories=function(){s.categoriesDataTable&&s.categoriesDataTable.destroy(),s.categoriesDataTable=t.dataTable("#categoriesTabList",{url:{apiURL:"category.list","categoryID?":r},dtOptions:{searching:!0},columnsData:s.dtCategoriesColumnsData,scope:e}),r?t.fetch({apiURL:"category.get.supportData",catID:r}).success(function(e){a.processResponse(e,null,function(){s.parentCategory=e.data.categoryData,s.isParentInactive=s.parentCategory.status,s.pageContentLoaded=!0,s.parentCategoryExist=!0,s.parentData=e.data.parentData,s.isInactiveParent=e.data.isInactiveParent})}):_.isEmpty(o.params.brandID)?s.pageContentLoaded=!0:url={apiURL:"manage.brand.product.list",brandId:o.params.brandID}},_.defer(function(){s.getCategories()}),s.goToCategories=function(e){e.preventDefault(),o.go("categories",{mCategoryID:r})},s.goToProducts=function(e){e.preventDefault(),o.go("products",{mCategoryID:r})},s.reloadDT=function(){t.reloadDT(s.categoriesDataTable)},s.detailDialog=function(e){t.fetch({apiURL:"manage.product.detailSupportData",productID:e}).success(function(e){var t=e.data;a.showDialog(t,{templateUrl:__globals.getTemplateURL("product.manage.detail-dialog")},function(e){})})},s.add=function(e){this.catID=e,t.fetch("category.fancytree.support-data").success(function(e){s.categories=e.data.categories,a.showDialog(s,{templateUrl:__globals.getTemplateURL("category.add-dialog")},function(e){_.has(e.value,"category_added")&&!0===e.value.category_added&&s.reloadDT()})})},s.edit=function(e){t.fetch({apiURL:"category.get.details",catID:e}).success(function(e){a.processResponse(e,null,function(){s.categoryData=e.data,0===e.data.status?s.categoryData.status=!1:s.categoryData.status=!0,a.showDialog({id:s.categoryData.id,name:s.categoryData.name,status:s.categoryData.status,parent_cat:s.categoryData.parent_id},{templateUrl:__globals.getTemplateURL("category.edit-dialog")},function(e){_.has(e.value,"category_updated")&&!0===e.value.category_updated&&(s.reloadDT(),s.getProducts())})})})},s.deleteDialog=function(e,t){a.showDialog({categoryID:e,name:t},{templateUrl:__globals.getTemplateURL("category.delete-dialog")},function(e){_.has(e.value,"category_deleted")&&!0===e.value.category_deleted&&s.reloadDT()})}}angular.module("ManageApp.category",[]).controller("CategoryController",["$scope","__DataStore","appServices","$state","__Utils",e])}(),function(){"use strict";function e(e,t,a,o){var n=this;o.fetch("category.fancytree.support-data").success(function(o){n.categories=o.data.categories,a.showDialog(n,{templateUrl:__globals.getTemplateURL("category.add-dialog")},function(a){_.has(a.value,"category_added")&&!0===a.value.category_added&&e.$parent.categoryCtrl.reloadDT(),t.go("categories")})})}angular.module("ManageApp.categoryAddDialog",[]).controller("CategoryAddDialogController",["$scope","$state","appServices","__DataStore",e])}(),function(){"use strict";function e(e,t,a,o,n){var s=this;s=t.setup(s,"category_add_form","categoryData"),s.categoryStatus=!1,s.categoryData.status=!0,_.isEmpty(a.params.mCategoryID)?s.categoryData.parent_cat=e.ngDialogData.catID:s.categoryData.parent_cat=a.params.mCategoryID,s.categoryData.categories=e.ngDialogData.categories,_.forEach(s.categoryData.categories,function(e){e.key==s.categoryData.parent_cat&&(s.categoryStatus=!0,s.categoryName=__ngSupport.getText(__globals.getJSString("category_add_title_text"),{__name__:e.title}))}),s.submit=function(){t.process("category.add",s).success(function(t){o.processResponse(t,null,function(t){e.closeThisDialog({category_added:!0})})})},s.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.categoryAdd",[]).controller("CategoryAddController",["$scope","__Form","$state","appServices","__DataStore",e])}(),function(){"use strict";function e(e,t,a,o){o.fetch({apiURL:"category.get.details",catID:t.params.catID}).success(function(o){a.processResponse(o,null,function(n){a.showDialog(o.data,{templateUrl:__globals.getTemplateURL("category.edit-dialog")},function(a){_.has(a.value,"category_updated")&&!0===a.value.category_updated&&e.$parent.categoryCtrl.reloadDT(),t.go("categories")})})})}angular.module("ManageApp.categoryEditDialog",[]).controller("CategoryEditDialogController",["$scope","$state","appServices","__DataStore",e])}(),function(){"use strict";function e(e,t,a,o){var n=this;n.categoryStatus=!1,n.updateURL={apiURL:"category.update",catID:a.params.catID},n=t.setup(n,"form_category_edit","categoryData"),n=t.updateModel(n,e.ngDialogData),n.categoryData.parent_cat=e.ngDialogData.parent_id,n.categoryData.categories=e.ngDialogData.categories,_.forEach(n.categoryData.categories,function(e){e.key==n.categoryData.parent_cat&&(n.categoryStatus=!0,n.categoryName=e.title)}),n.update=function(){t.process(n.updateURL,n).success(function(t){o.processResponse(t,function(t){1===t&&e.closeThisDialog({category_updated:!0})})})},n.closeDialog=function(){e.closeThisDialog(),a.go("categories")}}angular.module("ManageApp.categoryEdit",[]).controller("CategoryEditController",["$scope","__Form","$state","appServices",e])}(),function(){"use strict";function e(e,t,a,o,n){var s=this;s=t.setup(s,"form_category_delete","categoryData",{secured:!0}),s.categoryID=e.ngDialogData.categoryID,s.categoryName=_.unescape(e.ngDialogData.name),s.submit=function(o){t.process({apiURL:"category.delete",categoryID:o},s).success(function(t){a.processResponse(t,function(t){1===t&&e.closeThisDialog({category_deleted:!0})})})},s.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.categoryDelete",[]).controller("CategoryDeleteController",["$scope","__Form","appServices","$state","__DataStore",e])}(),function(){"use strict";function e(e,t,a){var o=this,n=[{name:"logo_url",template:"#brandLogoColumnTemplate"},{name:"name",orderable:!0,template:"#brandNameColumnTemplate"},{name:"creation_date",orderable:!0,template:"#brandCreatedDateColumnTemplate"},{name:"status",orderable:!0,template:"#statusColumnTemplate"},{name:null,template:"#brandColumnActionTemplate"}];o.brandsListDataTable=t.dataTable("#manageBrandList",{url:"manage.brand.list",dtOptions:{searching:!0,order:[[1,"asc"]]},columnsData:n,scope:e}),o.reloadDT=function(){t.reloadDT(o.brandsListDataTable)},o.detailDialog=function(e){t.fetch({apiURL:"manage.brand.detailSupportData",brandID:e}).success(function(e){var t=e.data;a.processResponse(e,null,function(){a.showDialog(t,{templateUrl:__globals.getTemplateURL("brand.manage.detail-dialog")},function(e){})})})},o.delete=function(e,t){a.showDialog({brandId:e,brandName:unescape(t)},{templateUrl:__globals.getTemplateURL("brand.manage.delete-dialog")},function(e){_.has(e.value,"brand_deleted")&&e.value.brand_deleted&&o.reloadDT()})}}angular.module("ManageApp.brand",[]).controller("BrandListController",["$scope","__DataStore","appServices",e])}(),function(){"use strict";function e(e){var t=this;t.ngDialogData=e.ngDialogData,t.brandData=t.ngDialogData,t.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.brandDetailDialog",[]).controller("BrandDetailDialogController",["$scope",e])}(),function(){"use strict";function e(e,t,a){var o=this;a.showDialog(o,{templateUrl:__globals.getTemplateURL("brand.manage.add-dialog")},function(a){_.has(a.value,"brand_added")&&!0===a.value.brand_added&&e.$parent.brandListCtrl.reloadDT(),t.go("brands")})}angular.module("ManageApp.brandAddDialog",[]).controller("BrandAddDialogController",["$scope","$state","appServices",e])}(),function(){"use strict";function e(e,t,a,o,n,s){var r=this;r=t.setup(r,"manage_brand_add","brandData",{secured:!1}),r.brandData.status=!0,r.imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return n.template("#logoListItemTemplate",e)},option:function(e,t){return n.template("#logoListOptionTemplate",e)}},searchField:["name"]}),r.images_count=0,r.getTempImagesMedia=function(){t.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){r.image_files=e.data.files,e.data.files.length>0&&(r.images_count=e.data.files.length)})})},r.getTempImagesMedia();var i=r.uploader=new o({url:n.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":n.getXSRFToken()}});i.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),r.currentUploadedFileCount=0,r.loadingStatus=!1,i.onAfterAddingAll=function(){r.loadingStatus=!0,s.info(__globals.getJSString("loading_text"),{sticky:!0})},i.onBeforeUploadItem=function(e){r.loadingStatus=!0},i.onSuccessItem=function(e,t){a.processResponse(t,{error:function(){},otherError:function(e){3==e&&s.error(t.data.message,{sticky:!1})}},function(){r.currentUploadedFileCount++})},i.onCompleteAll=function(){r.loadingStatus=!1,r.currentUploadedFileCount>0&&s.success(r.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),r.getTempImagesMedia(),r.currentUploadedFileCount=0},r.submit=function(){t.process("manage.brand.add",r).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({brand_added:!0,brand:t.data.brand})})})},r.showUploadedMediaDialog=function(){a.showDialog({image_files:r.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(r.image_files=e.value.files,r.images_count=e.value.files.length):r.getTempImagesMedia()})},r.close=function(){e.closeThisDialog()}}angular.module("ManageApp.brandAdd",[]).controller("BrandAddController",["$scope","__Form","appServices","FileUploader","__Utils","appNotify",e])}(),function(){"use strict";function e(e,t,a,o){a.fetch({apiURL:"manage.brand.editSupportData",brandID:t.params.brandID}).success(function(a){o.processResponse(a,null,function(n){o.showDialog(a.data,{templateUrl:__globals.getTemplateURL("brand.manage.edit-dialog")},function(a){_.has(a.value,"brand_updated")&&!0===a.value.brand_updated&&e.$parent.brandListCtrl.reloadDT(),t.go("brands")})})})}angular.module("ManageApp.brandEditDialog",[]).controller("BrandEditDialogController",["$scope","$state","__DataStore","appServices",e])}(),function(){"use strict";function e(e,t,a,o,n,s,r){var i=this;e.ngDialogData;i.updateURL={apiURL:"manage.brand.edit.process",brandID:o.params.brandID},i=t.setup(i,"manage_brand_add","brandData",{secured:!1}),i=t.updateModel(i,e.ngDialogData),i.imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return s.template("#logoListItemTemplate",e)},option:function(e,t){return s.template("#logoListOptionTemplate",e)}},searchField:["name"]}),i.images_count=0,i.getTempImagesMedia=function(){t.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){i.image_files=e.data.files,e.data.files.length>0&&(i.images_count=e.data.files.length)})})},i.getTempImagesMedia();var l=i.uploader=new n({url:s.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":s.getXSRFToken()}});l.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),i.currentUploadedFileCount=0,i.loadingStatus=!1,l.onAfterAddingAll=function(){i.loadingStatus=!0,r.info(__globals.getJSString("loading_text"),{sticky:!0})},l.onBeforeUploadItem=function(e){i.loadingStatus=!0},l.onSuccessItem=function(e,t){a.processResponse(t,{error:function(){},otherError:function(e){3==e&&r.error(t.data.message,{sticky:!1})}},function(){i.currentUploadedFileCount++})},l.onCompleteAll=function(){i.loadingStatus=!1,i.currentUploadedFileCount>0&&r.success(i.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),i.getTempImagesMedia(),i.currentUploadedFileCount=0},i.submit=function(){t.process(i.updateURL,i).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({brand_updated:!0})})})},i.showUploadedMediaDialog=function(){a.showDialog({image_files:i.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(i.image_files=e.value.files,i.images_count=e.value.files.length):i.getTempImagesMedia()})},i.close=function(){e.closeThisDialog()}}angular.module("ManageApp.brandEdit",[]).controller("BrandEditController",["$scope","__Form","appServices","$state","FileUploader","__Utils","appNotify",e])}(),function(){"use strict"
;angular.module("ManageApp.brandDeleteDialog",[]).controller("BrandDeleteDialogController",["$scope","__Form","appServices",function(e,t,a){var o=this,n=e.ngDialogData.brandId,s=e.ngDialogData.brandName;o=t.setup(o,"delete_brand_form","brandData",{secured:!0}),o.brandData.delete_related_products=!1,o.notificationMessage=__ngSupport.getText(__globals.getJSString("brand_delete_text"),{__name__:unescape(s)}),o.submit=function(){t.process({apiURL:"manage.brand.delete",brandID:n},o).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({brand_deleted:!0})})})},o.close=function(){e.closeThisDialog()}}])}(),function(){"use strict";function e(e,t,a,o,n,s,r){var i=this,l=s.categoryID;i.categoryStatus=!1,i=e.setup(i,"form_product_add","productData",{secured:!1}),i.productData.categories=[],_.isEmpty(l)||(i.productData.categoryID=l,i.productData.categories=[l]),i.imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return n.template("#imageListItemTemplate",e)},option:function(e,t){return n.template("#imageListOptionTemplate",e)}},searchField:["name"]}),i.brandsSelectConfig=__globals.getSelectizeOptions({valueField:"value",labelField:"name",searchField:["name"]}),i.relatedProductsSelectConfig=__globals.getSelectizeOptions({maxItems:1e3,searchField:["name","product_id"]}),i.getAddProductData=function(){e.fetch({apiURL:"manage.product.add.supportdata","categoryId?":i.productData.categoryID}).success(function(e){var t=e.data;a.processResponse(e,null,function(){i.related_products=t.related_products,i.store_currency_symbol=t.store_currency_symbol,i.store_currency=t.store_currency,i.fancytree_categories=t.categories,i.activeBrands=t.activeBrands,i.parentData=t.parentData,i.parentCategoryExist=t.isParentExist,i.categoryDetail=t.categoryDetail,i.isParentExist=!0,_.isUndefined(i.productData.categoryID)&&(i.isParentExist=!1),_.forEach(t.categories,function(e){e.key==i.productData.categoryID&&(i.categoryStatus=!0,i.categoryName=__ngSupport.getText(__globals.getJSString("product_add_title_text"),{__name__:e.title}))})})})},i.getAddProductData(),i.images_count=0,i.getTempImagesMedia=function(){e.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){i.image_files=e.data.files,e.data.files.length>0&&(i.images_count=e.data.files.length)})})},i.getTempImagesMedia();var c=i.uploader=new o({url:n.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":n.getXSRFToken()}});c.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),i.currentUploadedFileCount=0,i.loadingStatus=!1,c.onAfterAddingAll=function(){i.loadingStatus=!0,r.info(__globals.getJSString("loading_text"),{sticky:!0})},c.onBeforeUploadItem=function(e){i.loadingStatus=!0},c.onSuccessItem=function(e,t){a.processResponse(t,{error:function(){},otherError:function(e){3==e&&r.error(t.data.message,{sticky:!1})}},function(){i.currentUploadedFileCount++})},c.onCompleteAll=function(){i.loadingStatus=!1,i.currentUploadedFileCount>0&&r.success(i.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),i.getTempImagesMedia(),i.currentUploadedFileCount=0},i.submit=function(o){e.process("manage.product.add",i).success(function(e){a.processResponse(e,null,function(){i.productId=e.data.productId,!1===i.productData.publish?t.go("product_edit.options",{productID:i.productId}):t.go("products",{mCategoryID:l})})})},i.saveAndPublish=function(){i.productData.publish=!0,i.submit(null)},i.saveAndAddOptions=function(){i.productData.publish=!1,i.submit(null)},i.showUploadedMediaDialog=function(){a.showDialog({image_files:i.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(i.image_files=e.value.files,i.images_count=e.value.files.length):i.getTempImagesMedia()})},i.addBrand=function(){a.showDialog(i,{templateUrl:__globals.getTemplateURL("brand.manage.add-dialog")},function(e){_.has(e.value,"brand_added")&&!0===e.value.brand_added&&i.getAddProductData()})}}angular.module("ManageProductApp.add",[]).controller("ManageProductAddController",["__Form","$state","appServices","FileUploader","__Utils","$stateParams","appNotify",e])}(),function(){"use strict";function e(e,t,a,o){var n=this;n.image_files=[],n.files=e.ngDialogData.image_files,n.uploadedMediaFileCount=n.files.length,n.any_file_selected=!1,_.isEmpty(n.files)||_.forEach(n.files,function(e,t){n.image_files.push({name:e.name,path:e.path,exist:!1})}),n.all_files_selected=!1,n.selectAll=function(){n.all_files_selected?(n.any_file_selected=!0,n.unSelectedFilesCount=0):(n.any_file_selected=!1,n.unSelectedFilesCount=n.image_files.length),angular.forEach(n.image_files,function(e,t){n.image_files[t].exist=n.all_files_selected})},n.select=function(){n.unSelectedFilesCount=0,_.forEach(n.image_files,function(e){0==e.exist&&n.unSelectedFilesCount++}),0==n.unSelectedFilesCount&&0!=n.uploadedMediaFileCount?(n.all_files_selected=!0,n.any_file_selected=!0):n.unSelectedFilesCount>0&&0!=n.uploadedMediaFileCount?(n.all_files_selected=!1,n.any_file_selected=!0):(n.all_files_selected=!1,n.any_file_selected=!1)},n.getTempImagesMedia=function(){t.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){n.files=e.data.files,n.image_files=[],_.isEmpty(n.files)||_.forEach(n.files,function(e,t){n.image_files.push({name:e.name,path:e.path,exist:!1})})})})},n.delete=function(e){t.post({apiURL:"media.delete",fileName:e}).success(function(e){n.all_files_selected=!1,a.processResponse(e,null,function(){n.getTempImagesMedia()})})},n.deleteMultipleFiles=function(){var e=[];angular.forEach(n.image_files,function(t,a){t.exist&&e.push(t.name)}),_.isEmpty(e)||t.post("media.delete.multiple",{files:e}).success(function(e){a.processResponse(e,null,function(){n.getTempImagesMedia()})})},n.close=function(){e.closeThisDialog({files:n.files})}}angular.module("ManageProductApp.uploadedMedia",[]).controller("ManageProductUploadedMediaController",["$scope","__DataStore","appServices","$rootScope",e])}(),function(){"use strict";function e(e,t,a,o){var n=this,s=a.productID;n=o.setup(n,"update_product_status_form","productData"),n.initialContentLoaded=!1,e.fetch({apiURL:"manage.product.fetch.name",productID:s}).success(function(e){t.processResponse(e,null,function(){n.productName=__ngSupport.getText(__globals.getJSString("product_edit_title_text"),{__name__:e.data.productName.name});var t=e.data;n.isMultipleCategory=t.isMultipleCategory,n.categoryData=t.categoryData,n.detailsUrl=t.detailsUrl,n.initialContentLoaded=!0,n=o.updateModel(n,{active:e.data.status})})}),n.submit=function(){o.process({apiURL:"manage.product.update_status",productID:s},n).success(function(e){t.processResponse(e,null,function(){})})}}angular.module("ManageProductApp.details",[]).controller("ManageEditProductDetailsController",["__DataStore","appServices","$stateParams","__Form",e])}(),function(){"use strict";function e(e,t,a){var o=this;e.fetch({apiURL:"manage.product.details",productID:a.productID}).success(function(e){t.processResponse(e,null,function(){o.product=e.data.productName})})}angular.module("ManageProductApp.edit",[]).controller("ManageProductEditController",["__DataStore","appServices","$stateParams",e])}(),function(){"use strict";function e(e,t,a,o,n,s,r,i){var l=this,c=s.productID;l=e.setup(l,"form_product_edit","productData",{secured:!1}),l.imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return n.template("#imageListItemTemplate",e)},option:function(e,t){return n.template("#imageListOptionTemplate",e)}},searchField:["name"]}),l.relatedProductsSelectConfig=__globals.getSelectizeOptions({maxItems:1e3,searchField:["name","product_id"]}),l.brandsSelectConfig=__globals.getSelectizeOptions({valueField:"value",labelField:"name",searchField:["name"]}),l.pageStatus=!1,l.getProductEditDetails=function(){e.fetch({apiURL:"manage.product.edit.details.supportdata",productID:c}).success(function(t){a.processResponse(t,null,function(){a.delayAction(function(){var a=t.data,o={name:a.product.name};l.related_products=a.related_products,l.categories=a.product.categories,l.store_currency_symbol=a.store_currency_symbol,l.store_currency=a.store_currency,l.fancytree_categories=t.data.categories,l.activeBrands=a.activeBrands,l.pageStatus=!0,e.updateModel(l,a.product),i.$emit("productData",o)})})})},l.getProductEditDetails(),l.images_count=0,l.getTempImagesMedia=function(){e.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){l.image_files=e.data.files,e.data.files.length>0&&(l.images_count=e.data.files.length)})})},l.getTempImagesMedia();var u=l.uploader=new o({url:n.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":n.getXSRFToken()}});u.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),l.currentUploadedFileCount=0,l.loadingStatus=!1,u.onAfterAddingAll=function(){l.loadingStatus=!0,r.info(__globals.getJSString("loading_text"),{sticky:!0})},u.onBeforeUploadItem=function(e){l.loadingStatus=!0},u.onSuccessItem=function(e,t){a.processResponse(t,{error:function(){},otherError:function(e){3==e&&r.error(t.data.message,{sticky:!1})}},function(){l.currentUploadedFileCount++})},u.onCompleteAll=function(){l.loadingStatus=!1,l.currentUploadedFileCount>0&&r.success(l.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),l.getTempImagesMedia(),l.currentUploadedFileCount=0},l.submit=function(){e.process({apiURL:"manage.product.edit",productID:c},l).success(function(e){a.processResponse(e,null,function(){})})},l.showUploadedMediaDialog=function(){a.showDialog({image_files:l.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(l.image_files=e.value.files,l.images_count=e.value.files.length):l.getTempImagesMedia()})},l.addBrand=function(){a.showDialog(l,{templateUrl:__globals.getTemplateURL("brand.manage.add-dialog")},function(e){_.has(e.value,"brand_added")&&!0===e.value.brand_added&&l.getProductEditDetails()})}}angular.module("ManageProductApp.editDetails",[]).controller("ManageProductEditDetailsController",["__Form","$state","appServices","FileUploader","__Utils","$stateParams","appNotify","$rootScope",e])}(),function(){"use strict";function e(e,t,a,o){var n=[{name:"thumbnail",template:"#productImageThumbnailColumnTemplate"},{name:"title",orderable:!0},{name:null,template:"#productImageActionColumnTemplate"}],s=this,r=o.productID;s.imagesListDataTable=t.dataTable("#productImagesList",{url:{apiURL:"manage.product.image.list",productID:r},dtOptions:{searching:!0,order:[[1,"asc"]]},columnsData:n,scope:e}),s.reloadDT=function(){t.reloadDT(s.imagesListDataTable)},s.add=function(){a.showDialog({},{templateUrl:__globals.getTemplateURL("product.manage.Images.add-dialog")},function(e){_.has(e.value,"image_added")&&!0===e.value.image_added&&s.reloadDT()})},s.edit=function(e){t.fetch({apiURL:"manage.product.image.edit.supportdata",imageID:e,productID:r}).success(function(t){a.processResponse(t,null,function(){a.showDialog({image_id:e,prdouct_id:r,imageData:t.data.prdouct_image},{templateUrl:__globals.getTemplateURL("product.manage.Images.edit-dialog")},function(e){_.has(e.value,"image_updated")&&!0===e.value.image_updated&&s.reloadDT()})})})},s.delete=function(e,o){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("product_image_delete_confirm_text"),{__title__:o}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.product.image.delete",imageID:e,productID:r}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"error"})}},function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"success"}),s.reloadDT()})})})}}angular.module("ManageProductApp.images",[]).controller("ProductImagesController",["$scope","__DataStore","appServices","$stateParams",e])}(),function(){"use strict";function e(e,t,a,o,n,s,r){var i=this;i=t.setup(i,"form_product_add_image","imageData",{secured:!1}),i.imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return n.template("#imageListItemTemplate",e)},option:function(e,t){return n.template("#imageListOptionTemplate",e)}},searchField:["name"]}),i.images_count=0,i.getTempImagesMedia=function(){t.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){i.image_files=e.data.files,e.data.files.length>0&&(i.images_count=e.data.files.length)})})},i.getTempImagesMedia();var l=i.uploader=new o({url:n.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":n.getXSRFToken()}});l.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),i.currentUploadedFileCount=0,i.loadingStatus=!1,l.onAfterAddingAll=function(){i.loadingStatus=!0,r.info(__globals.getJSString("loading_text"),{sticky:!0})},l.onBeforeUploadItem=function(e){i.loadingStatus=!0},l.onSuccessItem=function(e,t){a.processResponse(t,{error:function(){},otherError:function(e){3==e&&r.error(t.data.message,{sticky:!1})}},function(){i.currentUploadedFileCount++})},l.onCompleteAll=function(){i.loadingStatus=!1,i.currentUploadedFileCount>0&&r.success(i.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),i.getTempImagesMedia(),i.currentUploadedFileCount=0},i.submit=function(){t.process({apiURL:"manage.product.image.add",productID:s.productID},i).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({image_added:!0})})})},i.showUploadedMediaDialog=function(){a.showDialog({image_files:i.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(i.image_files=e.value.files,i.images_count=e.value.files.length):i.getTempImagesMedia()})},i.cancel=function(){e.closeThisDialog()}}angular.module("ManageProductApp.addImage",[]).controller("ProductImageAddController",["$scope","__Form","appServices","FileUploader","__Utils","$stateParams","appNotify",e])}(),function(){"use strict";function e(e,t,a){var o=this,n=e.ngDialogData;o=t.setup(o,"form_product_edit_image","imageData",{secured:!1}),o=t.updateModel(o,n.imageData),o.submit=function(){t.process({apiURL:"manage.product.image.edit",productID:n.prdouct_id,imageID:n.image_id},o).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({image_updated:!0})})})},o.cancel=function(){e.closeThisDialog()}}angular.module("ManageProductApp.editImage",[]).controller("ProductImageEditController",["$scope","__Form","appServices",e])}(),function(){"use strict";function e(e,t,a,o){var n=[{name:"name",orderable:!0},{name:null,template:"#productOptionValuesColumnTemplate"},{name:null,template:"#productOptionActionColumnTemplate"}],s=this,r=o.productID;s.optionListDataTable=t.dataTable("#productOptionList",{url:{apiURL:"manage.product.option.list",productID:r},dtOptions:{searching:!0,order:[[0,"asc"]]},columnsData:n,scope:e}),s.reloadDT=function(){t.reloadDT(s.optionListDataTable)},s.add=function(){a.showDialog({},{templateUrl:__globals.getTemplateURL("product.manage.options.add-dialog")},function(e){_.has(e.value,"option_added")&&!0===e.value.option_added&&s.reloadDT()})},s.edit=function(e){t.fetch({apiURL:"manage.product.option.edit.supportdata",optionID:e,productID:r}).success(function(t){a.processResponse(t,null,function(){a.showDialog({option_id:e,prdouct_id:r,optionData:t.data.product_option},{templateUrl:__globals.getTemplateURL("product.manage.options.edit-dialog")},function(e){_.has(e.value,"option_updated")&&!0===e.value.option_updated&&s.reloadDT()})})})},s.values=function(e,o){t.fetch({apiURL:"manage.product.option.value.list",productID:r,optionID:e},{fresh:!0}).success(function(t){a.processResponse(t,null,function(){a.showDialog({option_id:e,prdouct_id:r,option_name:o,option_values:t.data.option_values},{templateUrl:__globals.getTemplateURL("product.manage.options.values.list-dialog")},function(e){})})})},s.addValues=function(e,t){a.showDialog({option_id:e,option_name:t,prdouct_id:r},{templateUrl:__globals.getTemplateURL("product.manage.options.values.add-dialog")},function(e){})},s.delete=function(e,o){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("product_option_delete_confirm_text"),{__name__:o}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.product.option.delete",optionID:e,productID:r}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"error"})}},function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"success"}),s.reloadDT()})})})}}angular.module("ManageProductApp.options",[]).controller("ProductOptionsController",["$scope","__DataStore","appServices","$stateParams",e])}(),function(){"use strict";function e(e,t,a,o){var n=this;n=t.setup(n,"form_product_add_option","optionData",{secured:!1}),n.optionData.values=[{name:"",addon_price:""}],n.addNewValue=function(){n.optionData.values.push({name:"",addon_price:""})},n.remove=function(e){!_.isEmpty(n.optionData.values)&&n.optionData.values.length>1&&_.remove(n.optionData.values,function(t,a){return e==a})},n.checkUnique=function(e,t){if(n.optionData.values.length>1)_.forEach(n.optionData.values,function(e,t){var a=e.name,o="values."+t+".name";_.isEmpty(a)?n.form_product_add_option[o].$setValidity("unique",!0):_.find(n.optionData.values,function(e,s){if(_.isEmpty(a))var r=a;else var r=a.toLowerCase();if(_.isEmpty(e.name))var i=e.name;else var i=e.name.toLowerCase();i==r&&t!=s?n.form_product_add_option[o].$setValidity("unique",!1):n.form_product_add_option[o].$setValidity("unique",!0)})});else{var a="values."+e+".name";n.form_product_add_option[a].$setValidity("unique",!0)}},n.submit=function(){t.process({apiURL:"manage.product.option.add",productID:o.productID},n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({option_added:!0})})})},n.cancel=function(){e.closeThisDialog()}}angular.module("ManageProductApp.addOption",[]).controller("ProductOptionAddController",["$scope","__Form","appServices","$stateParams",e])}(),function(){"use strict";function e(e,t,a,o){var n=this,s=e.ngDialogData;n=t.setup(n,"form_product_edit_option","optionData",{secured:!1}),n=t.updateModel(n,s.optionData),n.submit=function(){t.process({apiURL:"manage.product.option.edit",productID:s.prdouct_id,optionID:s.option_id},n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({option_updated:!0})})})},n.cancel=function(){e.closeThisDialog()}}angular.module("ManageProductApp.editOption",[]).controller("ProductOptionEditController",["$scope","__Form","appServices","$stateParams",e])}(),function(){"use strict";function e(e,t,a,o){var n=this,s=e.ngDialogData,r=s.prdouct_id,i=s.option_id;n.optionLableID=s.prdouct_id,n=t.setup(n,"form_product_edit_option_values","optionData",{secured:!1}),n.notification_message=__ngSupport.getText(__globals.getJSString("product_option_value_add_form_notification"),{__option_name__:s.option_name}),n.optionData.values=[],n.optionData.optionID=i,n=t.updateModel(n,{values:s.option_values}),n.addNewValue=function(){n.optionData.values.push({name:"",addon_price:""})},n.fetchOptionValues=function(){t.fetch({apiURL:"manage.product.option.value.list",productID:r,optionID:i}).success(function(e){o.processResponse(e,null,function(){n=t.updateModel(n,{values:e.data.option_values})})})},n.remove=function(e){!_.isEmpty(n.optionData.values)&&n.optionData.values.length>1&&_.remove(n.optionData.values,function(t,a){return e==a})},n.delete=function(e){a.post({apiURL:"manage.product.option.value.delete",optionID:i,productID:r,optionValueID:e}).success(function(t){o.processResponse(t,null,function(){_.remove(n.optionData.values,function(t){return t.id==e})})})},n.checkUnique=function(e,t){if(n.optionData.values.length>1)_.forEach(n.optionData.values,function(e,t){var a=e.name,o="values."+t+".name";_.isEmpty(a)?n.form_product_edit_option_values[o].$setValidity("unique",!0):_.find(n.optionData.values,function(e,s){if(_.isEmpty(a))var r=a;else var r=a.toLowerCase();if(_.isEmpty(e.name))var i=e.name;else var i=e.name.toLowerCase();i==r&&t!=s?n.form_product_edit_option_values[o].$setValidity("unique",!1):n.form_product_edit_option_values[o].$setValidity("unique",!0)})});else{var a="values."+e+".name";n.form_product_edit_option_values[a].$setValidity("unique",!0)}},n.submit=function(){t.process({apiURL:"manage.product.option.value.edit",productID:r,optionID:i},n).success(function(t){o.processResponse(t,null,function(){e.closeThisDialog()})})},n.cancel=function(){e.closeThisDialog()}}angular.module("ManageProductApp.optionValues",[]).controller("ProductOptionValuesController",["$scope","__Form","__DataStore","appServices",e])}(),function(){"use strict";function e(e,t,a){var o=this,n=e.ngDialogData;o=t.setup(o,"form_product_add_option","optionData",{secured:!1}),o.optionData.values=[{name:"",addon_price:""}],o.notification_message=__ngSupport.getText(__globals.getJSString("product_option_value_add_form_notification"),{__option_name__:n.option_name}),o.addNewValue=function(){o.optionData.values.push({name:"",addon_price:""})},o.remove=function(e){!_.isEmpty(o.optionData.values)&&o.optionData.values.length>1&&_.remove(o.optionData.values,function(t,a){return e==a})},o.checkUnique=function(e,t){if(o.optionData.values.length>1)_.forEach(o.optionData.values,function(e,t){var a=e.name,n="values."+t+".name";_.isEmpty(a)?o.form_product_add_option[n].$setValidity("unique",!0):_.find(o.optionData.values,function(e,s){if(_.isEmpty(a))var r=a;else var r=a.toLowerCase();if(_.isEmpty(e.name))var i=e.name;else var i=e.name.toLowerCase();i==r&&t!=s?o.form_product_add_option[n].$setValidity("unique",!1):o.form_product_add_option[n].$setValidity("unique",!0)})});else{var a="values."+e+".name";o.form_product_add_option[a].$setValidity("unique",!0)}},o.submit=function(){t.process({apiURL:"manage.product.option.value.add",productID:n.prdouct_id,optionID:n.option_id},o).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog()})})},o.cancel=function(){e.closeThisDialog()}}angular.module("ManageProductApp.addOptionValues",[]).controller("ProductOptionValuesAddController",["$scope","__Form","appServices",e])}(),function(){"use strict";function e(e,t,a,o){var n=[{name:"name",orderable:!0},{name:"value"},{name:null,template:"#productSpecificationActionColumnTemplate"}],s=this,r=o.productID;s.specificationListDataTable=t.dataTable("#productSpecificationList",{url:{apiURL:"manage.product.specification.list",productID:r},dtOptions:{searching:!0,order:[[0,"asc"]]},columnsData:n,scope:e}),s.reloadDT=function(){t.reloadDT(s.specificationListDataTable)},s.add=function(){t.fetch({apiURL:"manage.product.specification.get.all",productID:r}).success(function(e){a.processResponse(e,null,function(){a.showDialog({specificationData:e.data.specificationData},{templateUrl:__globals.getTemplateURL("product.manage.specification.add-dialog")},function(e){_.has(e.value,"specification_added")&&!0===e.value.specification_added&&s.reloadDT()})})})},s.edit=function(e){t.fetch({apiURL:"manage.product.specification.edit",productID:r,specificationID:e}).success(function(e){a.processResponse(e,null,function(){a.showDialog({specificationValues:e.data.secificationValues,specificationCollection:e.data.specificationCollection},{templateUrl:__globals.getTemplateURL("product.manage.specification.edit-dialog")},function(e){_.has(e.value,"specification_updated")&&!0===e.value.specification_updated&&s.reloadDT()})})})},s.delete=function(e,o){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("product_specification_delete_confirm_text"),{__name__:o}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.product.specification.delete",specificationID:e,productID:r}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"error"})}},function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"success"}),s.reloadDT()})})})}}angular.module("ManageProductApp.specification",[]).controller("ProductSpecificationController",["$scope","__DataStore","appServices","$stateParams",e])}(),function(){"use strict";function e(e,t,a,o){var n=this;n=t.setup(n,"form_product_add_specification","specificationData",{secured:!1}),n.specificationData=[{name:"",value:""}],n.specification_name_select_config=__globals.getSelectizeOptions({valueField:"name",labelField:"name",searchField:["name"],create:function(e){return{_id:e,name:e}}}),n.specification_value_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"value",searchField:["value"],create:function(e){return{value:e}}}),n.specificationCollection=e.ngDialogData.specificationData,n.addNewValue=function(){n.specificationData.push({name:"",value:""})},n.remove=function(e){!_.isEmpty(n.specificationData)&&n.specificationData.length>1&&_.remove(n.specificationData,function(t,a){return e==a})},n.submit=function(){t.process({apiURL:"manage.product.specification.add",productID:o.productID},n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({specification_added:!0})})})},n.checkUnique=function(e,t){if(n.specificationData.length>1)_.forEach(n.specificationData,function(e,t){var a=e.name,o=t+".name";_.isEmpty(a)?n.form_product_add_specification[o].$setValidity("unique",!0):_.find(n.specificationData,function(e,s){if(_.isEmpty(a))var r=a;else var r=a.toLowerCase();if(_.isEmpty(e.name))var i=e.name;else var i=e.name.toLowerCase();i==r&&t!=s?n.form_product_add_specification[o].$setValidity("unique",!1):n.form_product_add_specification[o].$setValidity("unique",!0)})});else{var a=e+".name";n.form_product_add_specification[a].$setValidity("unique",!0)}},n.cancel=function(){e.closeThisDialog()}}angular.module("ManageProductApp.addSpecification",[]).controller("ProductSpecificationAddController",["$scope","__Form","appServices","$stateParams",e])}(),function(){"use strict";function e(e,t,a,o){var n=this,s=e.ngDialogData;n=t.setup(n,"form_specification_edit","specificationData"),n=t.updateModel(n,s.specificationValues),n.specification_name_select_config=__globals.getSelectizeOptions({valueField:"name",labelField:"name",searchField:["name"],create:function(e){return{_id:e,name:e}}}),n.specification_value_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"value",searchField:["value"],create:function(e){return{value:e}}}),n.specificationCollection=s.specificationCollection,n.submit=function(){t.process({apiURL:"manage.product.specification.update",productID:o.productID,specificationID:n.specificationData._id},n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({specification_updated:!0})})})},n.cancel=function(){e.closeThisDialog()}}angular.module("ManageProductApp.editSpecification",[]).controller("ProductSpecificationEditController",["$scope","__Form","appServices","$stateParams",e])}(),function(){"use strict";function e(e,t,a,o,n){var s=this,r=_.isEmpty(o.params.mCategoryID)?null:o.params.mCategoryID,i=o.current.name;s.currentStateName=i,s.pageContentLoaded=!1,s.parentCategoryExist=!1,s.categoryID=r;var l,c=[{name:"thumbnail",template:"#productThumbnailColumnTemplate"},{name:"name",orderable:!0,template:"#nameColumnTemplate"},{name:"featured",orderable:!0,template:"#featuredProductColumnTemplate"},{name:"out_of_stock",orderable:!0,template:"#outOfStockColumnTemplate"},{name:"status",orderable:!0,template:"#productStatusColumnTemplate"},{name:"creation_date",orderable:!0,template:"#creationDateColumnTemplate"},{name:"updation_date",orderable:!0,template:"#updationDateColumnTemplate"},{name:"categories_id",template:"#productCategoriesColumnTemplate"},{name:"brand",template:"#productBrandColumnTemplate"},{name:null,template:"#productActionColumnTemplate"}],s=this;l=_.isEmpty(r)?_.isEmpty(o.params.brandID)?"manage.product.list":{apiURL:"manage.brand.product.list",brandId:o.params.brandID}:{apiURL:"manage.category.product.list",categoryID:r},s.category={},s.categoryStatus=!1,s.pageStatus=!1,s.brandStatus=!1,s.getProducts=function(){s.productsListDataTable&&s.productsListDataTable.destroy(),s.productsListDataTable=t.dataTable("#productsTabList",{url:l,dtOptions:{searching:!0,order:[[1,"asc"]]},columnsData:c,scope:e},null,function(e){s.category=e._options.category,s.parentData=e._options.parentData,_.isEmpty(s.category)?s.categoryStatus=!1:s.categoryStatus=!0,s.brand=e._options.brand,_.isEmpty(s.brand)?s.brandStatus=!1:s.brandStatus=!0,s.pageStatus=!0})},_.defer(function(){s.getProducts()}),s.goToCategories=function(e){e.preventDefault(),o.go("categories",{mCategoryID:r})},s.goToProducts=function(e){e.preventDefault(),o.go("products",{mCategoryID:r})},s.reloadDT=function(){t.reloadDT(s.productsListDataTable)},s.detailDialog=function(e){t.fetch({apiURL:"manage.product.detailSupportData",productID:e}).success(function(e){var t=e.data;a.showDialog(t,{templateUrl:__globals.getTemplateURL("product.manage.detail-dialog")},function(e){})})},s.add=function(e){this.catID=e,t.fetch("category.fancytree.support-data").success(function(e){s.categories=e.data.categories,a.showDialog(s,{templateUrl:__globals.getTemplateURL("category.add-dialog")},function(e){_.has(e.value,"category_added")&&!0===e.value.category_added&&s.reloadDT()})})},s.productDelete=function(e,o){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("product_delete_confirm_text"),{__name__:unescape(o)}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.product.delete",productID:e}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),s.reloadDT()})})})}}function t(e){var t=this;t.ngDialogData=e.ngDialogData,t.productData=t.ngDialogData,t.currencySymbol=t.ngDialogData.currencySymbol,t.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.productList",[]).controller("ProductListController",["$scope","__DataStore","appServices","$state","__Utils",e]).controller("ProductDetailDialogController",["$scope",t])}(),function(){"use strict";angular.module("ManageApp.orderDetails",[]).controller("ManageOrderDetailsController",["__DataStore","$stateParams","appServices",function(e,t,a){var o=this,n=t.orderId;o.discountStatus=!1,o.initialContendLoaded=!1,e.fetch({apiURL:"manage.order.details.dialog",orderID:n}).success(function(e){a.processResponse(e,null,function(){var t=e.data.orderDetails.data;o.billingAddress=t.address.billingAddress,o.shippingAddress=t.address.shippingAddress,o.sameAddress=t.address.sameAddress,o.user=t.user,o.order=t.order,o.orderProducts=t.orderProducts,o.coupon=t.coupon,o.taxes=t.taxes,o.shipping=t.shipping}),o.initialContendLoaded=!0}),o.contactUserDialog=function(){e.fetch({apiURL:"manage.order.get.user.details",orderID:n}).success(function(e){o.userData=e.data,a.processResponse(e,null,function(){a.showDialog(e.data,{templateUrl:__globals.getTemplateURL("order.manage.contact-user")},function(e){})})})}}])}(),function(){"use strict";function e(e,t,a,o){var n=[{name:"list_order",orderable:!0,template:"#pagesColumnListOrderTemplate"},{name:"title",orderable:!0,template:"#pagesColumnTitleTemplate"},{name:"type",orderable:!0,template:"#pagesColumnTypeTemplate"},{name:"created_at",orderable:!0,
template:"#pagesColumnTimeTemplate"},{name:"updated_at",orderable:!0,template:"#pagesColumnUpdatedTimeTemplate"},{name:"add_to_menu",template:"#pagesColumnAddToMenuTemplate"},{name:"status",orderable:!0,template:"#pagesColumnActiveTemplate"},{name:null,template:"#pagesColumnActionTemplate"}],s=this;s.parentPageID=o.params.parentPageID,s.parent=!1,s.pagesListDataTable=t.dataTable("#lwPagesTable",{url:{apiURL:"manage.pages.fetch.datatable.source","parentPageID?":s.parentPageID?s.parentPageID:null},columnsData:n,dtOptions:{searching:!0},scope:e}),s.parentPageID&&t.fetch({apiURL:"manage.pages.get.parent.page",parentPageID:s.parentPageID}).success(function(e){s.parentPage=e.data,s.parent=!0,s.parentPageID=s.parentPageID}),$("table#lwPagesTable tbody").sortable({items:"tr",cursor:"move",axis:"y",containment:".lw-pages-container",update:function(e,o){var n=$(this).sortable("toArray"),r=[];_.isEmpty(n)||(_.forEach(n,function(e,t){r.push({id:_.trim(e.replace("rowid_","")),list_order:t+1})}),t.post("manage.page.update.list.order",{pages_list_order:r}).success(function(e){a.processResponse(e,{error:function(){s.reloadDT()}},function(){})}))}}),$("table#lwPagesTable tbody").disableSelection(),s.reloadDT=function(){t.reloadDT(s.pagesListDataTable)},s.delete=function(e,o){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("page_delete_confirm_text"),{__name__:unescape(o)}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.pages.delete",pageID:e}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),s.reloadDT()})})})}}angular.module("ManagePagesApp.list",[]).controller("ManagePagesListController",["$scope","__DataStore","appServices","$state",e])}(),function(){"use strict";function e(e,t,a,o){var n=this;o.fetch("manage.pages.get.Type").success(function(o){n.page=o.data,a.showDialog(n,{templateUrl:__globals.getTemplateURL("pages.manage.add")},function(a){_.has(a.value,"page_added")&&!0===a.value.page_added&&e.$parent.managePagesListCtrl.reloadDT(),t.go("pages")})})}angular.module("ManagePagesApp.add.dialog",[]).controller("ManagePagesAddDialogController",["$scope","$state","appServices","__DataStore",e])}(),function(){"use strict";function e(e,t,a,o){var n=this;if(n=t.setup(n,"manage_pages_add","pageData"),n.pagesSelectConfig=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),e.ngDialogData){var s=e.ngDialogData.page;n.pageType=s.type,n.pageLink=s.link,n.pages=s.fancytree_data}n.pageData.add_to_menu=!0,n.pageData.hide_sidebar=!1,n.pageData.active=!0,n.pageData.type="1",n.pageData.open_as="_blank",n.descriptionRequired=!0,n.externalLinkRequired=!1,n.openAsRequired=!1,n.pageTypeChanged=function(){var e=n.pageData.type;1==e?(n.descriptionRequired=!0,n.externalLinkRequired=!1,n.openAsRequired=!1):2==e&&(n.descriptionRequired=!1,n.externalLinkRequired=!0,n.openAsRequired=!0)},n.submit=function(){t.process("manage.pages.add",n).success(function(t){o.processResponse(t,null,function(){e.closeThisDialog({page_added:!0})})})},n.close=function(){e.closeThisDialog()}}angular.module("ManagePagesApp.add",[]).controller("ManagePagesAddController",["$scope","__Form","$state","appServices",e])}(),function(){"use strict";function e(e,t,a,o){o.fetch({apiURL:"manage.pages.get.details",pageID:t.params.pageID}).success(function(o){a.processResponse(o,null,function(n){a.showDialog(o.data,{templateUrl:__globals.getTemplateURL("pages.manage.edit")},function(a){_.has(a.value,"page_updated")&&!0===a.value.page_updated&&e.$parent.managePagesListCtrl.reloadDT(),t.go("pages")})})})}angular.module("ManagePagesApp.edit.dialog",[]).controller("ManagePagesEditDialogController",["$scope","$state","appServices","__DataStore",e])}(),function(){"use strict";function e(e,t,a,o){var n=this;n.updateURL={apiURL:"manage.pages.update",pageID:o.params.pageID},n=t.setup(n,"form_page_edit","pageData"),n=t.updateModel(n,e.ngDialogData.pageDetails),n.pagesSelectConfig=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),n.ngDialogData=e.ngDialogData,n.type=n.ngDialogData.pageDetails.type,3!=n.type&&(n.pageType=n.ngDialogData.configItems.pageType,n.pageLink=n.ngDialogData.configItems.pageLinks,n.getPageType=function(){if(n.ngDialogData){n.pages=n.ngDialogData.pageDetails.fancytree_data;var e=n.ngDialogData.pageDetails.type;1==e?(n.descriptionRequired=!0,n.externalLinkRequired=!1,n.openAsRequired=!1):2==e&&(n.descriptionRequired=!1,n.externalLinkRequired=!0,n.openAsRequired=!0)}},n.getPageType()),n.update=function(){t.process(n.updateURL,n).success(function(t){a.processResponse(t,null,function(t){e.closeThisDialog({page_updated:!0})})})},n.cancel=function(){e.closeThisDialog()}}angular.module("ManagePagesApp.edit",[]).controller("ManagePagesEditController",["$scope","__Form","appServices","$state",e])}(),function(){"use strict";function e(e,t,a){var o=this;o.getPageInfo=function(){a.fetch({apiURL:"manage.display.page.details",pageID:e.params.pageID},o).success(function(e){t.processResponse(e,null,function(){o.pageDetails=e.data})})},o.getPageInfo()}angular.module("ManagePagesApp.page.details",[]).controller("PageDetailsController",["$state","appServices","__DataStore",e])}(),function(){"use strict";function e(e,t){var a=this;t.$on("$stateChangeStart",function(e,t,o,n,s){_.defer(function(){var e=t.name;"store_settings_edit.general"==e?(a.generalPanelClass="panel-collapse collapse in",a.generalPanelStatus=!0):a.generalPanelClass="panel-collapse collapse","store_settings_edit.currency"==e?(a.currencylPanelClass="panel-collapse collapse in",a.currencyPanelStatus=!0):a.currencylPanelClass="panel-collapse collapse","store_settings_edit.order"==e?(a.orderPanelClass="panel-collapse collapse in",a.orderPanelStatus=!0):a.orderPanelClass="panel-collapse collapse","store_settings_edit.product"==e?(a.productsPanelClass="panel-collapse collapse in",a.productPanelStatus=!0):a.productsPanelClass="panel-collapse collapse","store_settings_edit.placement"==e?(a.placementPanelClass="panel-collapse collapse in",a.placementPanelStatus=!0):a.placementPanelClass="panel-collapse collapse","store_settings_edit.contact"==e?(a.contactPanelClass="panel-collapse collapse in",a.contactPanelStatus=!0):a.contactPanelClass="panel-collapse collapse","store_settings_edit.term_condition"==e?(a.termsConditionsPanelClass="panel-collapse collapse in",a.termsConditionPanelStatus=!0):a.termsConditionsPanelClass="panel-collapse collapse","store_settings_edit.privacy_policy"==e?(a.privacyPolicyPanelClass="panel-collapse collapse in",a.privacyPolicyPanelStatus=!0):a.privacyPolicyPanelClass="panel-collapse collapse","store_settings_edit.social"==e?(a.socialPanelClass="panel-collapse collapse in",a.socialPanelStatus=!0):a.socialPanelClass="panel-collapse collapse","store_settings_edit.language"==e?(a.languagePanelClass="panel-collapse collapse in",a.languagePanelStatus=!0):a.languagePanelClass="panel-collapse collapse","store_settings_edit.css-style"==e?(a.cssStylePanelClass="panel-collapse collapse in",a.cssStylePanelStatus=!0):a.cssStylePanelClass="panel-collapse collapse"})}),a.getPage=function(t){t&&_.defer(function(){switch(t){case 1:e.go("store_settings_edit.general"),a.generalPanelStatus=!0;break;case 2:e.go("store_settings_edit.currency"),a.currencyPanelStatus=!0;break;case 3:e.go("store_settings_edit.order"),a.orderPanelStatus=!0;break;case 4:e.go("store_settings_edit.product"),a.productPanelStatus=!0;break;case 5:e.go("store_settings_edit.placement"),a.placementPanelStatus=!0;break;case 6:e.go("store_settings_edit.contact"),a.contactPanelStatus=!0;break;case 7:e.go("store_settings_edit.term_condition"),a.termsConditionPanelStatus=!0;break;case 8:e.go("store_settings_edit.privacy_policy"),a.privacyPolicyPanelStatus=!0;break;case 9:e.go("store_settings_edit.social"),a.socialPanelStatus=!0;break;case 10:e.go("store_settings_edit.css-style"),a.cssStylePanelStatus=!0}})},"store_settings_edit.general"==e.current.name?(a.generalPanelClass="panel-collapse collapse in",a.generalPanelStatus=!0):a.generalPanelClass="panel-collapse collapse","store_settings_edit.currency"==e.current.name?(a.currencylPanelClass="panel-collapse collapse in",a.currencyPanelStatus=!0):a.currencylPanelClass="panel-collapse collapse","store_settings_edit.order"==e.current.name?(a.orderPanelClass="panel-collapse collapse in",a.orderPanelStatus=!0):a.orderPanelClass="panel-collapse collapse","store_settings_edit.product"==e.current.name?(a.productsPanelClass="panel-collapse collapse in",a.productPanelStatus=!0):a.productsPanelClass="panel-collapse collapse","store_settings_edit.placement"==e.current.name?(a.placementPanelClass="panel-collapse collapse in",a.placementPanelStatus=!0):a.placementPanelClass="panel-collapse collapse","store_settings_edit.contact"==e.current.name?(a.contactPanelClass="panel-collapse collapse in",a.contactPanelStatus=!0):a.contactPanelClass="panel-collapse collapse","store_settings_edit.term_condition"==e.current.name?(a.termsConditionsPanelClass="panel-collapse collapse in",a.termsConditionPanelStatus=!0):a.termsConditionsPanelClass="panel-collapse collapse","store_settings_edit.privacy_policy"==e.current.name?(a.privacyPolicyPanelClass="panel-collapse collapse in",a.privacyPolicyPanelStatus=!0):a.privacyPolicyPanelClass="panel-collapse collapse","store_settings_edit.social"==e.current.name?(a.socialPanelClass="panel-collapse collapse in",a.socialPanelStatus=!0):a.socialPanelClass="panel-collapse collapse","store_settings_edit.language"==e.current.name?(a.languagePanelClass="panel-collapse collapse in",a.languagePanelStatus=!0):a.languagePanelClass="panel-collapse collapse","store_settings_edit.css-style"==e.current.name?(a.cssStylePanelClass="panel-collapse collapse in",a.cssStylePanelStatus=!0):a.cssStylePanelClass="panel-collapse collapse"}angular.module("manageApp.storeSettingsEdit",[]).controller("EditStoreSettingsController",["$state","$scope",e])}(),function(){"use strict";angular.module("manageApp.GeneralSettings",[]).controller("GeneralSettingsController",["__Form","$scope","appServices","$state","FileUploader","__Utils","appNotify","$rootScope",function(e,t,a,o,n,s,r,i){var l=this;l.pageStatus=!1,l=e.setup(l,"form_general_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["store_name"]}),l.logo_images_select_config=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return s.template("#imageListItemTemplate",e)},option:function(e,t){return s.template("#imageListOptionTemplate",e)}},searchField:["name"]}),l.timezone_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),l.home_page_select_config=__globals.getSelectizeOptions({valueField:"id",labelField:"name",searchField:["name"]}),e.fetch({apiURL:"store.settings.edit.supportdata",formType:1}).success(function(t){var o=t.data;l.homePageList=o.store_settings.home_page_setting,l.homePageSetting=__globals.generateKeyValueItems(l.homePageList),l.timezoneData=o.store_settings.timezone_list,a.processResponse(t,null,function(){_.isEmpty(o.store_settings)||e.updateModel(l,o.store_settings),l.pageStatus=!0})}),l.images_count=0,l.getTempImagesMedia=function(){e.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){l.logoImages=e.data.files;var t=[];_.forEach(l.logoImages,function(e,a){l.imagesExtention=e.name.split(".").pop(),"png"==l.imagesExtention&&t.push(e)}),l.logo_images=t,l.logo_images.length>0?l.images_count=l.logo_images.length:l.images_count=0})})},l.getTempImagesMedia();var c=l.uploader=new n({url:s.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":s.getXSRFToken()}});c.filters.push({name:"customFilter",fn:function(e,t){if("image/png"==e.type)return this.queue.length<1e3}}),l.currentUploadedFileCount=0,l.loadingStatus=!1,c.onAfterAddingAll=function(){l.loadingStatus=!0,r.info(__globals.getJSString("loading_text"),{sticky:!0})},c.onBeforeUploadItem=function(e){l.loadingStatus=!0},c.onSuccessItem=function(e,t){a.processResponse(t,null,function(){l.currentUploadedFileCount++})},c.onSuccessItem=function(e,t){a.processResponse(t,null,function(){"png"===e._file.name.split(".").pop()&&l.currentUploadedFileCount++})},c.onCompleteAll=function(){l.loadingStatus=!1,0===l.currentUploadedFileCount&&r.warn(__globals.getJSString("logo_empty_file_uploaded_text"),{sticky:!1}),l.currentUploadedFileCount>0&&r.success(l.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),l.getTempImagesMedia(),l.currentUploadedFileCount=0},l.submit=function(){e.process({apiURL:"store.settings.edit",formType:1},l).success(function(e){a.processResponse(e,null,function(){__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})},l.showUploadedMediaDialog=function(){a.showDialog({image_files:l.logo_images},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(l.logo_images=e.value.files,l.images_count=e.value.files.length):"$closeButton"==e.value&&l.getTempImagesMedia()})}}])}(),function(){"use strict";angular.module("manageApp.CurrencySettings",[]).controller("CurrencySettingsController",["__Form","appServices",function(e,t){var a=this;a.isZeroDecimalCurrency=!1,a.generateCurrenciesArray=function(e,t){if(!t)return e;var a=[];return _.forEach(e,function(e,t){a.push({currency_code:t,currency_name:e.name})}),a.push({currency_code:"other",currency_name:__globals.getJSString("other")}),a},a.checkIsZeroDecimalCurrency=function(e,t){var o=_.filter(e,function(e,a){return a===t});a.isZeroDecimalCurrency=Boolean(o.length)},a.checkIsPaypalSupported=function(e){var t=_.filter(a.options,function(t,a){return a==e});a.isPaypalSupport=Boolean(t.length)},a.formatCurrency=function(e,t){_.defer(function(){var o=$("#lwCurrencyFormat"),n=o.attr("data-format");a.currency_format_preview=n.split("{__currencySymbol__}").join(e).split("{__amount__}").join(100).split("{__currencyCode__}").join(t)})},a.pageStatus=!1,a=e.setup(a,"edit_currency_configuration","editData",{secured:!0,unsecuredFields:["currency_symbol"]}),a.currencies_select_config=__globals.getSelectizeOptions({valueField:"currency_code",labelField:"currency_name",searchField:["currency_code","currency_name"]}),a.is_support_paypal=!0,e.fetch({apiURL:"store.settings.edit.supportdata",formType:2}).success(function(o){t.processResponse(o,null,function(){var t=o.data,n=t.store_settings.currencies;a.options=n.options,a.currencies=n.details,a.zeroDecimal=n.zero_decimal,a.currencies_options=a.generateCurrenciesArray(n.details,!0),_.isEmpty(t.store_settings)||(a.checkIsZeroDecimalCurrency(a.zeroDecimal,t.store_settings.currency_value),a.checkIsPaypalSupported(t.store_settings.currency),a.default_currency_format=t.store_settings.default_currency_format,a=e.updateModel(a,t.store_settings),_.forEach(a.currencies,function(e,t){t==a.editData.currency_value&&(a.currencySymbol=e.symbol)}),"other"==t.store_settings.currency&&(a.currencySymbol=t.store_settings.currency_symbol),a.formatCurrency(a.currencySymbol,a.editData.currency_value)),a.pageStatus=!0})}),a.useDefaultFormat=function(e,t,o){a.editData.currency_format=e;var n=$("#lwSymbol"),t=n.html(n.attr("data")).text(),s=a.editData.currency_format;a.currency_format_preview=s.split("{__currencySymbol__}").join(t).split("{__amount__}").join(100).split("{__currencyCode__}").join(o)},a.updateCurrencyPreview=function(e,t,o){if(1==o)var n=$("#lwSymbol"),e=n.html(n.attr("data")).text();_.isUndefined(e)&&(e=""),_.isUndefined(t)&&(t="");var s=$("#lwCurrencyFormat"),r=s.attr("data-format");a.currency_format_preview=r.split("{__currencySymbol__}").join(e).split("{__amount__}").join(100).split("{__currencyCode__}").join(t)},a.submit=function(){e.process({apiURL:"store.settings.edit",formType:2},a).success(function(e){t.processResponse(e,null,function(){__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7"},function(){location.reload()})})})},a.currencyChange=function(e){a.checkIsZeroDecimalCurrency(a.zeroDecimal,e),_.isEmpty(e)||"other"==e?(a.editData.currency_value="",a.editData.currency_symbol=""):(_.forEach(a.currencies,function(t,o){o==e&&(a.editData.currency_value=e,a.editData.currency_symbol=t.ASCII,a.currencySymbol=t.symbol)}),a.is_support_paypal=!0),a.updateCurrencyPreview(a.currencySymbol,a.editData.currency_value),a.checkIsPaypalSupported(a.editData.currency_value)},a.currencyValueChange=function(e){if(a.checkIsZeroDecimalCurrency(a.zeroDecimal,e),_.isEmpty(e)||"other"==e)_.isEmpty(e)?a.editData.currency="":a.editData.currency="other";else{var t={};_.forEach(a.currencies,function(a,o){o==e&&(t=a)}),_.isEmpty(t)?a.editData.currency="other":(a.editData.currency=e,a.editData.currency_symbol=t.ASCII,a.currencySymbol=t.symbol)}a.checkIsPaypalSupported(e),_.isUndefined(a.editData.currency_value)&&(a.currencySymbol=""),a.updateCurrencyPreview(a.currencySymbol,a.editData.currency_value)}}])}(),function(){"use strict";angular.module("manageApp.OrderSettings",[]).controller("OrderSettingsController",["__Form","appServices",function(e,t){var a=this;a=e.setup(a,"form_order_and_currency_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["payment_check_text","payment_bank_text","payment_cod_text","payment_other_text"]}),a.pageStatus=!1,e.fetch({apiURL:"store.settings.edit.supportdata",formType:3}).success(function(o){var n=o.data;t.processResponse(o,null,function(){_.isEmpty(n.store_settings)||e.updateModel(a,n.store_settings),a.pageStatus=!0})}),a.addStripeKeys=function(e){1==e?a.editData.isLiveStripeKeysExist=!1:a.editData.isTestingStripeKeysExist=!1},a.submit=function(){e.process({apiURL:"store.settings.edit",formType:3},a).success(function(e){t.processResponse(e,null,function(){a.editData.logo_image="",__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})}}])}(),function(){"use strict";angular.module("manageApp.PlacementSettings",[]).controller("PlacementSettingsController",["__Form","appServices",function(e,t){var a=this;a.pageStatus=!1,a=e.setup(a,"form_placement_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["addtional_page_end_content","global_notification","append_email_message"]}),a.categories_menu_placement_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"name",searchField:["name"]}),a.brand_menu_placement_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"name",searchField:["name"]}),e.fetch({apiURL:"store.settings.edit.supportdata",formType:5}).success(function(o){var n=o.data;a.menu_placement=n.store_settings.menu_placement,t.processResponse(o,null,function(){_.isEmpty(n.store_settings)||e.updateModel(a,n.store_settings),a.pageStatus=!0})}),a.submit=function(){e.process({apiURL:"store.settings.edit",formType:5},a).success(function(e){t.processResponse(e,null,function(){a.editData.logo_image="",__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})}}])}(),function(){"use strict";angular.module("manageApp.ProductSettings",[]).controller("ProductSettingsController",["__Form","appServices",function(e,t){var a=this;a.pageStatus=!1,a=e.setup(a,"form_product_settings_edit","editData",{secured:!0,modelUpdateWatcher:!1}),a.editData.credit_info=!0,e.fetch({apiURL:"store.settings.edit.supportdata",formType:4}).success(function(o){var n=o.data;t.processResponse(o,null,function(){_.isEmpty(n.store_settings)||e.updateModel(a,n.store_settings),a.pageStatus=!0})}),a.submit=function(){e.process({apiURL:"store.settings.edit",formType:4},a).success(function(e){t.processResponse(e,null,function(){__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})}}])}(),function(){"use strict";angular.module("manageApp.ContactSettings",[]).controller("ContactSettingsController",["__Form","appServices",function(e,t){var a=this;a.pageStatus=!1,a=e.setup(a,"form_contact_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["contact_address"]}),e.fetch({apiURL:"store.settings.edit.supportdata",formType:6}).success(function(o){var n=o.data;t.processResponse(o,null,function(){_.isEmpty(n.store_settings)||e.updateModel(a,n.store_settings),a.pageStatus=!0})}),a.submit=function(){e.process({apiURL:"store.settings.edit",formType:6},a).success(function(e){t.processResponse(e,null,function(){a.editData.logo_image="",__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})}}])}(),function(){"use strict";angular.module("manageApp.privacyPolicySettings",[]).controller("PrivacyPolicySettingsController",["__Form","appServices",function(e,t){var a=this;a.pageStatus=!1,a=e.setup(a,"form_privacy_policy_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["privacy_policy"]}),e.fetch({apiURL:"store.settings.edit.supportdata",formType:8}).success(function(o){var n=o.data;t.processResponse(o,null,function(){_.isEmpty(n.store_settings)||e.updateModel(a,n.store_settings),a.pageStatus=!0})}),a.submit=function(){e.process({apiURL:"store.settings.edit",formType:8},a).success(function(e){t.processResponse(e,null,function(){__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})}}])}(),function(){"use strict";angular.module("manageApp.termAndConditionSettings",[]).controller("TermAndConditionSettingsController",["__Form","appServices",function(e,t){var a=this;a.pageStatus=!1,a=e.setup(a,"form_term_and_condition_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["term_condition"]}),e.fetch({apiURL:"store.settings.edit.supportdata",formType:7}).success(function(o){var n=o.data;t.processResponse(o,null,function(){_.isEmpty(n.store_settings)||e.updateModel(a,n.store_settings),a.pageStatus=!0})}),a.submit=function(){e.process({apiURL:"store.settings.edit",formType:7},a).success(function(e){t.processResponse(e,null,function(){__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})}}])}(),function(){"use strict";angular.module("manageApp.CssStyleSettings",[]).controller("CssStyleSettingsController",["$scope","__Form","appServices",function(e,t,a){var o=this;o.pageStatus=!1,o=t.setup(o,"edit_css_style_configuration","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["custom_css"]});var n=document.getElementById("custom_css"),s=CodeMirror.fromTextArea(n,{lineNumbers:!0,mode:"css",readOnly:!1,autofocus:!0,lineWrapping:!0});t.fetch({apiURL:"store.settings.edit.supportdata",formType:9}).success(function(e){var n=e.data;a.processResponse(e,null,function(){var e=n.store_settings;t.updateModel(o,e),_.isEmpty(e.custom_css)||s.setValue(e.custom_css),_.defer(function(){s.setCursor({line:0,ch:0})})}),o.pageStatus=!0}),o.submit=function(){o.editData.custom_css=s.getValue(),t.process({apiURL:"store.settings.edit",formType:9},o).success(function(e){a.processResponse(e,null,function(){__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})}}])}(),function(){"use strict";angular.module("manageApp.socialSettings",[]).controller("SocialSettingsController",["__Form","appServices",function(e,t){var a=this;a.pageStatus=!1,a=e.setup(a,"form_social_settings","editData",{secured:!0,modelUpdateWatcher:!1}),e.fetch({apiURL:"store.settings.edit.supportdata",formType:10}).success(function(o){var n=o.data;t.processResponse(o,null,function(){_.isEmpty(n.store_settings)||e.updateModel(a,n.store_settings),a.pageStatus=!0})}),a.submit=function(){e.process({apiURL:"store.settings.edit",formType:10},a).success(function(e){t.processResponse(e,null,function(){__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})}}])}(),function(e,t,a){"use strict";t.module("ManageApp.payment",[]).controller("PaymentListController",["__Utils","__Form","$state","appServices","$scope","__DataStore",function(e,a,o,n,s,r){var i=this;i=a.setup(i,"manage_payment_list","paymentData"),i.paymentData.duration=5;var l=moment().startOf("month").format("YYYY-MM-DD"),c=moment().endOf("month").format("YYYY-MM-DD"),u=moment().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),p=moment().subtract(1,"months").endOf("month").format("YYYY-MM-DD"),d=moment().startOf("week").format("YYYY-MM-DD"),g=moment().endOf("week").format("YYYY-MM-DD"),m=moment().weekday(-7).format("YYYY-MM-DD"),f=moment().weekday(-1).format("YYYY-MM-DD"),D=moment().format("YYYY-MM-DD"),h=moment().subtract(1,"day").format("YYYY-MM-DD"),y=moment().subtract(1,"year").startOf("year").format("YYYY-MM-DD"),b=moment().subtract(1,"year").endOf("year").format("YYYY-MM-DD"),S=moment().startOf("year").format("YYYY-MM-DD"),C=moment().endOf("year").format("YYYY-MM-DD"),v=moment().subtract(30,"day").format("YYYY-MM-DD"),D=moment().format("YYYY-MM-DD");i.paymentData.start=D,i.paymentData.end=D,i.startDateConfig={time:!1},i.endDateConfig={minDate:moment().format("YYYY-MM-DD"),time:!1},s.$watch("paymentListCtrl.paymentData.start",function(e,a){var o=t.element("#end");_.isEmpty(e)?o.bootstrapMaterialDatePicker("setMinDate",""):o.bootstrapMaterialDatePicker("setMinDate",e)}),i.startDateUpdated=function(e){i.paymentData.duration&&e!=l&&e!=u&&e!=d&&e!=m&&(i.paymentData.duration=7),i.paymentData.start=e},i.endDateUpdated=function(e){i.paymentData.duration&&e!=c&&e!=p&&e!=g&&e!=f&&(i.paymentData.duration=7),i.paymentData.start>i.paymentData.end&&(i.paymentData.end=e),i.paymentData.end=e},i.durationChange=function(e){if(e)switch(e){case 1:i.paymentData.start=l,i.paymentData.end=c;break;case 2:i.paymentData.start=u,i.paymentData.end=p;break;case 3:i.paymentData.start=d,i.paymentData.end=g;break;case 4:i.paymentData.start=m,i.paymentData.end=f;break;case 5:i.paymentData.start=D,i.paymentData.end=D;break;case 6:i.paymentData.start=h,i.paymentData.end=h;break;case 7:i.paymentData.start=y,i.paymentData.end=b;break;case 8:i.paymentData.start=S,i.paymentData.end=C;break;case 9:i.paymentData.start=v,i.paymentData.end=D}};var T=[{name:"order_uid",orderable:!0,template:"#orderPaymentColumnUIDTemplate"},{name:"txn",orderable:!0,template:"#orderPaymentTransactionIDTemplate"},{name:"formattedFee",orderable:!0,template:"#orderPaymentFeeTemplate"},{name:"formattedPaymentOn",orderable:!0},{name:"formattedPaymentMethod",orderable:!0},{name:"totalAmount",orderable:!0,template:"#orderPaymentTotalAmountTemplate"},{name:null,orderable:!1,template:"#orderPaymentActionTemplate"}];i.getPaymentList=function(){i.orderPaymentsListDataTable&&i.orderPaymentsListDataTable.destroy(),i.orderPaymentsListDataTable=r.dataTable("#managePaymentList",{url:{apiURL:"order.payment.list",startDate:i.paymentData.start,endDate:i.paymentData.end},dtOptions:{searching:!0,rowCallback:function(e,t,a){t.isTestOrder&&$(e).addClass("lw-sandbox-order")}},columnsData:T,scope:s},null,i.tableData=function(e){i.tableStatus=e.data,i.paymentDuration=__globals.generateKeyValueItems(e._options.duration),i.excelDownloadURL=e._options.excelDownloadURL,i.isEmptySanboxRecords=e._options.isEmptySanboxRecords})},i.getPaymentList(),i.orderDetailsDialog=function(e){r.fetch({apiURL:"manage.order.details.dialog",orderID:e}).success(function(e){n.processResponse(e,null,function(){var t=e.data;n.showDialog({orderDetails:t.orderDetails},{templateUrl:__globals.getTemplateURL("order.manage.details")},function(e){_.has(e.value,"order_updated")&&!0===e.value.order_updated&&i.reloadDT()})})})},i.paymentDetailsDialog=function(e){r.fetch({apiURL:"order.payment.detail.dialog",orderPaymentID:e}).success(function(e){i.orderPaymentData=e.data,n.processResponse(e,null,function(){n.showDialog(i.orderPaymentData,{templateUrl:__globals.getTemplateURL("order.manage.payment-details-dialog")},function(e){})})})},i.deleteSandBoxOrder=function(e,t,a){2==a&&n.showDialog({paymentId:e,orderUid:t},{templateUrl:__globals.getTemplateURL("order.manage.payment-delete-dialog")},function(e){_.has(e.value,"payment_deleted")&&!0===e.value.payment_deleted&&i.getPaymentList()}),1==a&&__globals.showConfirmation({text:__globals.getJSString("delete_sandbox_payment_msg"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){r.post({apiURL:"order.payment.delete.sandbox",paymentId:e}).success(function(e){var t=e.data.message;n.processResponse(e,{error:function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),i.getPaymentList()})})})}}])}(window,window.angular),function(){"use strict";function e(e,t,a,o,n,s){var r=this;r.userInfo=n.authInfo().designation;var i=null;_.isEmpty(o.params.userID)||(i=o.params.userID);var l=[{name:"order_uid",orderable:!0,template:"#orderColumnIdTemplate"},{name:"fname",orderable:!0,template:"#userNameColumnIdTemplate"},{name:"status",orderable:!0,template:"#orderStatusColumnIdTemplate"},{name:"paymentStatus",orderable:!0,template:"#paymentActionColumnTemplate"},{name:"paymentMethod",template:"#orderPaymentMethodColumnIdTemplate"},{name:"creation_date",orderable:!0,template:"#orderColumnTimeTemplate"},{name:"total_amount",orderable:!0,template:"#orderColumnTotalAmountTemplate"},{name:null,template:"#orderActionColumnTemplate"}],c={active:{id:"activeTabList",route:"orders.active",status:1},cancelled:{id:"cancelledTabList",route:"orders.cancelled",status:3},completed:{id:"completedTabList",route:"orders.complete",status:6}};$("#adminOrderList a").click(function(e){e.preventDefault();var t=$(this),a=t.attr("aria-controls"),o=c[a];_.isEmpty(o)||($(this).tab("show"),r.getOrders(o.id,o.status))}),r.getOrders=function(a,o){r.cartOrderListDataTable&&r.cartOrderListDataTable.destroy(),r.cartOrderListDataTable=t.dataTable("#"+a,{url:{
apiURL:"manage.get.orders.data",status:o,"userID?":i},dtOptions:{searching:!0,order:[[5,"desc"]],columnDefs:[{targets:[1],visible:1===r.userInfo,searchable:!1}],rowCallback:function(e,t,a){t.isTestOrder&&$(e).addClass("lw-sandbox-order")}},columnsData:l,scope:e},null,r.userData=function(e){r.userFullName=e._options.userFullName,r.isEmptySanboxRecords=e._options.isEmptySanboxRecords,r.manageOrdersTitle=__ngSupport.getText(__globals.getJSString("manage_order_title"),{__name__:r.userFullName})})},_.defer(function(e){if("orders.active"==o.current.name){var t=$('.nav li a[href="#active"]');t.triggerHandler("click",!0)}else if("orders.cancelled"==o.current.name){var t=$('.nav li a[href="#cancelled"]');t.triggerHandler("click",!0)}else if("orders.completed"==o.current.name){var t=$('.nav li a[href="#completed"]');t.triggerHandler("click",!0)}},0),r.goToActiveTab=function(e){e.preventDefault(),o.go("orders.active",{userID:i})},r.goToCancelledTab=function(e){e.preventDefault(),o.go("orders.cancelled",{userID:i})},r.goToCompletedTab=function(e){e.preventDefault(),o.go("orders.completed",{userID:i})},r.reloadDT=function(){t.reloadDT(r.cartOrderListDataTable)},r.orderDetailsDialog=function(e){t.fetch({apiURL:"manage.order.details.dialog",orderID:e}).success(function(e){a.processResponse(e,null,function(){var t=e.data;a.showDialog({orderDetails:t.orderDetails},{templateUrl:__globals.getTemplateURL("order.manage.details")},function(e){_.has(e.value,"order_updated")&&!0===e.value.order_updated&&r.reloadDT()})})})},r.logDetailsDialog=function(e){t.fetch({apiURL:"manage.order.log.details.dialog",orderID:e}).success(function(e){a.processResponse(e,null,function(){var t=e.data;a.showDialog({order:t.cartOrder,orderLog:t.orderLog},{templateUrl:__globals.getTemplateURL("order.manage.log")},function(e){})})})},r.updateDialog=function(e,o){t.fetch({apiURL:"manage.order.update.support.data",orderID:e}).success(function(t){t.data;a.processResponse(t,null,function(){a.showDialog({order:t.data.order,orderID:e},{templateUrl:__globals.getTemplateURL("order.manage.update")},function(t){_.has(t.value,"order_updated")&&!0===t.value.order_updated&&(r.orderStatus=t.value.updateData.status,r.paymentStatus=t.value.updateData.paymentStatus,3==r.orderStatus&&2==r.paymentStatus&&r.showConfirmationOnOrderUpdate(e,o),r.reloadDT())})})})},r.showConfirmationOnOrderUpdate=function(e,t){__globals.showConfirmation({title:__globals.getJSString("order_refund_string"),text:__globals.getJSString("order_refund_change_status_string"),type:"success",confirmButtonClass:"btn-success",confirmButtonColor:"#337ab7",confirmButtonText:__globals.getJSString("order_payment_confirm_text")},function(a){r.reloadDT(),r.refundPaymentDialog(e,t)})},r.refundPaymentDialog=function(e,o){t.fetch({apiURL:"order.payment.refund.detail.dialog",orderID:e}).success(function(e){e.data;a.processResponse(e,null,function(){a.showDialog({orderDetails:e.data,orderUID:o},{templateUrl:__globals.getTemplateURL("order.manage.refund-dialog")},function(e){_.has(e.value,"order_updated")&&!0===e.value.order_updated&&r.reloadDT()})})})},r.paymentDetailsDialog=function(e){t.fetch({apiURL:"order.payment.detail.dialog",orderPaymentID:e}).success(function(e){r.orderPaymentData=e.data,a.processResponse(e,null,function(){a.showDialog(r.orderPaymentData,{templateUrl:__globals.getTemplateURL("order.manage.payment-details-dialog")},function(e){})})})},r.updatePaymentDetailsDialog=function(e){t.fetch({apiURL:"order.payment.update.detail.dialog",orderID:e}).success(function(t){r.orderData=t.data,a.processResponse(t,null,function(){a.showDialog(r.orderData,{templateUrl:__globals.getTemplateURL("order.manage.update-payment-dialog")},function(t){_.has(t.value,"order_updated")&&!0===t.value.order_updated&&(__globals.showConfirmation({title:__globals.getJSString("order_payment_update_string"),text:__globals.getJSString("order_payment_change_status_string"),type:"success",confirmButtonClass:"btn-success",confirmButtonColor:"#337ab7",confirmButtonText:__globals.getJSString("order_payment_confirm_text")},function(t){r.reloadDT(),r.updateDialog(e)}),r.reloadDT())})})})},r.contactUserDialog=function(e){t.fetch({apiURL:"manage.order.get.user.details",orderID:e}).success(function(e){r.userData=e.data,a.processResponse(e,null,function(){a.showDialog(e.data,{templateUrl:__globals.getTemplateURL("order.manage.contact-user")},function(e){})})})},r.deleteSandBoxOrder=function(e,o,n){2==o&&a.showDialog({orderId:e,orderUid:n},{templateUrl:__globals.getTemplateURL("order.manage.order-delete-dialog")},function(e){_.has(e.value,"order_deleted")&&!0===e.value.order_deleted&&r.reloadDT()}),1==o&&__globals.showConfirmation({text:__globals.getJSString("delete_sandbox_order_msg"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.order.sandbox_order.delete",orderId:e,isTestOrder:1}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),r.reloadDT()})})})}}angular.module("ManageApp.orderList",[]).controller("ManageOrderListController",["$scope","__DataStore","appServices","$state","__Auth","$rootScope",e])}(),function(){"use strict";function e(e,t,a){var o=this;o=t.setup(o,"form_order_update","orderData"),o.ngDialogData=e.ngDialogData.order,o.orderData={statusName:o.ngDialogData.statusName,currentPaymentStatus:o.ngDialogData.currentPaymentStatus,checkMail:!0},o.statuses=o.ngDialogData.statusCode,o.updateDialogTitle=__ngSupport.getText(__globals.getJSString("update_order_dialog_title_text"),{__name__:o.ngDialogData.name,__orderUID__:o.ngDialogData.orderUID}),o=t.updateModel(o,o.orderData),o.update=function(){t.process({apiURL:"manage.order.update",orderID:o.ngDialogData._id},o).success(function(t){a.processResponse(t,function(t){1===t&&e.closeThisDialog({order_updated:!0,updateData:o.ngDialogData})})})},o.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.orderUpdate",[]).controller("ManageUpdateOrderController",["$scope","__Form","appServices",e])}(),function(){"use strict";function e(e,t,a){var o=this;o=t.setup(o,"form_order_cancel","orderData"),o.ngDialogData=e.ngDialogData,o=t.updateModel(o,o.orderData),o.updateData={approveStatus:o.orderData,paymentStatus:o.ngDialogData.order.paymentStatus},o.update=function(n){o.orderData.approveStatus=n,t.process({apiURL:"manage.order.cancel",orderID:o.ngDialogData.order._id},o).success(function(t){a.processResponse(t,function(t){1===t&&e.closeThisDialog({order_updated:!0,orderStatus:o.updateData})})})},o.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.orderCancel",[]).controller("ManageCancelOrderController",["$scope","__Form","appServices",e])}(),function(){"use strict";function e(e,t){var a=this;a.discountStatus=!1,a=t.setup(a,"cart_order_dialog_form","cartData",{secured:!0}),a.ngDialogData=e.ngDialogData;var o=a.ngDialogData.orderDetails.data;a.billingAddress=o.address.billingAddress,a.shippingAddress=o.address.shippingAddress,a.sameAddress=o.address.sameAddress,a.user=o.user,a.order=o.order,a.orderProducts=o.orderProducts,a.coupon=o.coupon,a.taxes=o.taxes,a.shipping=o.shipping,a.pageStatus=!0,a.close=function(){e.closeThisDialog()}}angular.module("ManageApp.orderDialogList",[]).controller("ManageOrderDialogController",["$scope","__Form",e])}(),function(){"use strict";function e(e,t){var a=this;a=t.setup(a,"cart_order_log_dialog_form","cartData",{secured:!0}),a.ngDialogData=e.ngDialogData,a.order=a.ngDialogData.order,a.orderLog=a.ngDialogData.orderLog,a.close=function(){e.closeThisDialog()}}angular.module("ManageApp.orderLogList",[]).controller("ManageOrderLogController",["$scope","__Form",e])}(),function(){"use strict";function e(e,t){var a=this;a.ngDialogData=e.ngDialogData,a.paymentDetail=a.ngDialogData.orderPaymentDetails,a.rawDataDialog=function(e){t.showDialog({rawDetail:e},{templateUrl:__globals.getTemplateURL("order.manage.raw-data-dialog")},function(e){})},a.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.paymentDetailsDialog",[]).controller("ManagePaymentDetailsController",["$scope","appServices",e])}(),function(){"use strict";function e(e,t){var a=this;a.ngDialogData=e.ngDialogData,a.rawData=a.ngDialogData.rawDetail,a.isObject=function(e){return _.isObject(e)},a.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.rawDataDialog",[]).controller("ManageRawDataController",["$scope","appServices",e])}(),function(){"use strict";function e(e,t,a){var o=this;o=t.setup(o,"form_order_payment_update","orderData"),o.ngDialogData=e.ngDialogData,o.orderDetails=o.ngDialogData.orderDetails,o.paymentMethodList=o.ngDialogData.paymentMethod,o=t.updateModel(o,o.orderDetails),o.update=function(){t.process({apiURL:"order.payment.update.process",orderID:o.orderDetails.orderID},o).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({order_updated:!0})})})},o.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.orderPaymentUpdate",[]).controller("ManageUpdateOrderPaymentController",["$scope","__Form","appServices",e])}(),function(){"use strict";function e(e,t,a){var o=this;o=t.setup(o,"form_order_payment_refund","orderData"),o.ngDialogData=e.ngDialogData,o.paymentDetails=o.ngDialogData.orderDetails.orderPaymentDetails,o.paymentMethodList=o.ngDialogData.orderDetails.paymentMethodList,o.paymentDetails.orderUID=o.ngDialogData.orderUID,o=t.updateModel(o,o.paymentDetails),o.update=function(){t.process({apiURL:"order.payment.refund.process",orderID:o.paymentDetails.orderID},o).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({order_updated:!0})})})},o.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.orderPaymentRefund",[]).controller("ManageRefundOrderPaymentController",["$scope","__Form","appServices",e])}(),function(){"use strict";function e(e,t,a){var o=this;o=e.setup(o,"manage_contact_form","userData"),o.ngDialogData=a.ngDialogData,o.userData.fullName=o.ngDialogData.fullname,o.userData.email=o.ngDialogData.email,o.userData.id=o.ngDialogData.id,o.userData.orderUID=o.ngDialogData.orderUID,o=e.updateModel(o,o.userData),o.submit=function(){e.process("manage.order.user.contact",o).success(function(e){t.processResponse(e,null,function(){a.closeThisDialog()})})},o.closeDialog=function(){a.closeThisDialog()}}angular.module("ManageApp.orderContact",[]).controller("ManageContactUserController",["__Form","appServices","$scope",e])}(),function(){"use strict";function e(e,t,a,o,n,s){var r=this;r=t.setup(r,"form_manage_order_delete","orderData",{secured:!0}),r.ngDialogData=e.ngDialogData,r.orderUid=r.ngDialogData.orderUid,r.submit=function(){t.process({apiURL:"manage.order.delete",orderId:r.ngDialogData.orderId},r).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({order_deleted:!0})})})},r.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.orderDelete",[]).controller("ManageOrderDeleteController",["$scope","__Form","appServices","$state","__Auth","$rootScope",e])}(),function(){"use strict";function e(e,t,a,o,n,s){var r=this;r=t.setup(r,"form_manage_payment_delete","paymentData",{secured:!0}),r.ngDialogData=e.ngDialogData,r.orderUid=r.ngDialogData.orderUid,r.submit=function(){t.process({apiURL:"order.payment.delete",paymentId:r.ngDialogData.paymentId},r).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({payment_deleted:!0})})})},r.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.paymentDelete",[]).controller("ManagePaymentDeleteController",["$scope","__Form","appServices","$state","__Auth","$rootScope",e])}(),function(){"use strict";function e(e,t,a,o){}angular.module("DashboardApp.main",[]).controller("DashboardController",["$scope","appServices","__DataStore","$rootScope",e])}(),function(){"use strict";function e(e,t,a,o){var n=this,s=[{name:"title",orderable:!0,template:"#titleColumnTemplate"},{name:"code",orderable:!0},{name:"start_date",orderable:!0,template:"#startDateColumnTemplate"},{name:"end_date",orderable:!0,template:"#endDateColumnTemplate"},{name:"status",orderable:!0,template:"#statusColumnTemplate"},{name:null,template:"#columnActionTemplate"}],r={current:{id:"currentCoupon",route:"coupons.current",status:1},expired:{id:"expiredCoupon",route:"coupons.expired",status:2},upcoming:{id:"upcomingCoupon",route:"coupons.upcoming",status:3}};$("#manageCouponList a").click(function(e){e.preventDefault();var t=$(this),a=t.attr("aria-controls"),o=r[a];_.isEmpty(o)||($(this).tab("show"),n.getCouponsList(o.id,o.status))}),n.getCouponsList=function(a,o){n.couponsListDataTable&&n.couponsListDataTable.destroy(),n.couponsListDataTable=t.dataTable("#"+a,{url:{apiURL:"manage.coupon.list",status:o},dtOptions:{searching:!0,order:[[1,"asc"]]},columnsData:s,scope:e})},_.defer(function(e){if("coupons.current"==o.current.name){var t=$('.nav li a[href="#current"]');t.triggerHandler("click",!0)}else if("coupons.expired"==o.current.name){var t=$('.nav li a[href="#expired"]');t.triggerHandler("click",!0)}else if("coupons.upcoming"==o.current.name){var t=$('.nav li a[href="#upcoming"]');t.triggerHandler("click",!0)}},0),n.tabClick=function(e,t){e.preventDefault(),o.go(t)},n.detailDialog=function(e){t.fetch({apiURL:"manage.coupon.detailSupportData",couponID:e}).success(function(e){var t=e.data;a.processResponse(e,null,function(){a.showDialog(t,{templateUrl:__globals.getTemplateURL("coupon.manage.detail-dialog")},function(e){})})})},n.reloadDT=function(){t.reloadDT(n.couponsListDataTable)},n.delete=function(e,o){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("coupon_delete_text"),{__name__:unescape(o)}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.coupon.delete",couponID:e}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),n.reloadDT()})})})},n.openCouponDialog=function(){t.fetch("manage.coupon.fetch.couponDiscountType").success(function(e){var t=e.data;a.showDialog(t,{templateUrl:__globals.getTemplateURL("coupon.manage.add-dialog")},function(e){_.has(e.value,"coupon_added")&&!0===e.value.coupon_added&&n.reloadDT()})})},n.openEditCouponDialog=function(e){t.fetch({apiURL:"manage.coupon.editSupportData",couponID:e}).success(function(e){var t=e.data;t.start=moment(t.start).format("YYYY-MM-DD HH:mm:ss"),t.end=moment(t.end).format("YYYY-MM-DD HH:mm:ss"),a.showDialog(t,{templateUrl:__globals.getTemplateURL("coupon.manage.edit-dialog")},function(e){_.has(e.value,"coupon_updated")&&!0===e.value.coupon_updated&&n.reloadDT()})})}}function t(e,t,a,o){var n=this;n.ngDialogData=e.ngDialogData,n.couponDate=n.ngDialogData,n.closeDialog=function(){e.closeThisDialog()}}function a(e,t,a,o){var n=this;n.ngDialogData=e.ngDialogData,n=t.setup(n,"manage_coupon_add","couponData",{secured:!1}),n.discountType=n.ngDialogData.discountType,n.couponData.amountSymbol=n.ngDialogData.currencySymbol,n.couponData.currency=n.ngDialogData.currency,n.couponData.discount_type=2,n.couponData.active=!0;var s=moment().format("YYYY-MM-DD HH:mm:ss");n.couponData.start=s,n.couponData.end=s,n.startDateConfig={minDate:moment().format("YYYY-MM-DD HH:mm:ss")},e.$watch("couponAddCtrl.couponData.start",function(e,t){var a=angular.element("#end");_.isEmpty(e)?a.bootstrapMaterialDatePicker("setMinDate",""):a.bootstrapMaterialDatePicker("setMinDate",e)}),n.endDateUpdated=function(e){n.couponData.start>n.couponData.end&&(n.couponData.end=e)},n.submit=function(){t.process("manage.coupon.add",n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({coupon_added:!0})})})},n.closeDialog=function(){e.closeThisDialog()}}function o(e,t,a,o){var n=this,s=e.ngDialogData;n.updateURL={apiURL:"manage.coupon.edit.process",couponID:s.couponData._id},n=t.setup(n,"manage_coupon_edit","couponData"),n=t.updateModel(n,e.ngDialogData.couponData),n.discountType=s.configItems.discountType,n.couponData.amountSymbol=s.configItems.currencySymbol,n.couponData.currency=s.configItems.currency,n.startDateConfig={minDate:moment().format("YYYY-MM-DD HH:mm:ss")},e.$watch("couponEditCtrl.couponData.end",function(e,t){var a=angular.element("#end");_.isEmpty(e)?a.bootstrapMaterialDatePicker("setDate",""):a.bootstrapMaterialDatePicker("setDate",e)}),n.endDateUpdated=function(e){n.couponData.start>n.couponData.end&&(n.couponData.end=e)},n.submit=function(){t.process(n.updateURL,n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({coupon_updated:!0})})})},n.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.coupon",[]).controller("CouponListController",["$scope","__DataStore","appServices","$state",e]).controller("CouponDetailDialogController",["$scope","__DataStore","appServices","$state",t]).controller("CouponAddController",["$scope","__Form","appServices","$state",a]).controller("CouponEditController",["$scope","__Form","appServices","$state",o])}(),function(){"use strict";function e(e,t,a,o){var n=this,s=[{name:"name",orderable:!0,template:"#countryColumnTemplate"},{name:"type",orderable:!0,template:"#typeColumnTemplate"},{name:"charges",orderable:!0},{name:"creation_date",orderable:!0,template:"#creationDateColumnTemplate"},{name:"status",orderable:!0,template:"#statusColumnTemplate"},{name:null,template:"#columnActionTemplate"}],r={specificCountry:{id:"manageShippingList"},allOtherCountries:{id:"allOtherCountriesTabList"}};$("#manageShippingTab a").click(function(e){e.preventDefault();var t=$(this),a=t.attr("aria-controls"),o=r[a];_.isEmpty(o)||($(this).tab("show"),n.getShipping(o.id))}),n.getShipping=function(a){n.shippingListDataTable=t.dataTable("#"+a,{url:"manage.shipping.list",dtOptions:{searching:!0,order:[[1,"asc"]]},columnsData:s,scope:e})},$('.nav li a[href="#specificCountry"]').triggerHandler("click",!0),n.reloadDT=function(){t.reloadDT(n.shippingListDataTable)},n.detailDialog=function(e){t.fetch({apiURL:"manage.shipping.detailSupportData",shippingID:e}).success(function(e){var t=e.data;a.processResponse(e,null,function(){a.showDialog(t,{templateUrl:__globals.getTemplateURL("shipping.manage.detail-dialog")},function(e){})})})},n.delete=function(e,o){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("shipping_delete_text"),{__country__:o}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.shipping.delete",shippingID:e}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),n.reloadDT()})})})},n=o.setup(n,"manage_aoc_edit","shippingData"),t.fetch("manage.aoc.shipping.editSupportData").success(function(e){a.processResponse(e,null,function(){var t=e.data;n.shippingType=t.configItems.shippingType,n.currencySymbol=t.configItems.storeCurrencySymbol,n.currency=t.configItems.currency,n=o.updateModel(n,t.shipping)})}),n.submit=function(){o.process("manage.aoc.shipping.update",n).success(function(e){a.processResponse(e,null,function(){})})}}function t(e,t,a,o){var n=this;n.ngDialogData=e.ngDialogData,n.currencySymbol=n.ngDialogData.currencySymbol,n.shippingDetail=n.ngDialogData.shippingData,n.closeDialog=function(){e.closeThisDialog()}}function a(e,t,a,o){t.fetch("manage.shipping.fetch.contries").success(function(t){var n=t.data;a.showDialog(n,{templateUrl:__globals.getTemplateURL("shipping.manage.add-dialog")},function(t){_.has(t.value,"shipping_added")&&!0===t.value.shipping_added&&e.$parent.shippingListCtrl.reloadDT(),o.go("shippings")})})}function o(e,t,a,o){var n=this,s=e.ngDialogData;n=t.setup(n,"manage_shipping_add","shippingData"),n.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),n.countries=s.countries,n.shippingType=s.shippingType,n.shippingData.active=!0,n.shippingData.type=1,n.freeAfterAmount=!0,n.charges=!0,n.amountCap=!1,n.currencySymbol=s.currencySymbol,n.currency=s.currency,n.onChangeType=function(e){s.shippingType;1==e?(n.freeAfterAmount=!0,n.charges=!0,n.amountCap=!1):2==e?(n.freeAfterAmount=!1,n.charges=!0,n.amountCap=!0):3!=e&&4!=e||(n.freeAfterAmount=!1,n.charges=!1,n.amountCap=!1)},n.submit=function(){t.process("manage.shipping.add",n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({shipping_added:!0})})})},n.closeDialog=function(){e.closeThisDialog()}}function n(e,t,a,o){t.fetch({apiURL:"manage.shipping.editSupportData",shippingID:o.params.shippingID}).success(function(t){a.processResponse(t,null,function(n){var s=t.data;a.showDialog(s,{templateUrl:__globals.getTemplateURL("shipping.manage.edit-dialog")},function(t){_.has(t.value,"shipping_updated")&&!0===t.value.shipping_updated&&e.$parent.shippingListCtrl.reloadDT(),o.go("shippings")})})})}function s(e,t,a,o){var n=this,s=e.ngDialogData;n.updateURL={apiURL:"manage.shipping.edit.process",shippingID:o.params.shippingID},n=t.setup(n,"manage_shipping_edit","shippingData"),n.shippingData=s,n.discountType=s.shippingType,n.shippingData=s.shippingData,n.currencySymbol=s.currencySymbol,n.currency=s.currency,n=t.updateModel(n,n.shippingData),n.submit=function(){t.process(n.updateURL,n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({shipping_updated:!0})})})},n.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.shipping",[]).controller("ShippingListController",["$scope","__DataStore","appServices","__Form",e]).controller("ShippingDetailController",["$scope","__DataStore","appServices","$state",t]).controller("ShippingAddDialogController",["$scope","__DataStore","appServices","$state",a]).controller("ShippingAddController",["$scope","__Form","appServices","$state",o]).controller("ShippingEditDialogController",["$scope","__DataStore","appServices","$state",n]).controller("ShippingEditController",["$scope","__Form","appServices","$state",s])}(),function(){"use strict";function e(e,t,a){var o=this,n=[{name:"label",orderable:!0,template:"#labelColumnTemplate"},{name:"name",orderable:!0,template:"#countryColumnTemplate"},{name:"type",orderable:!0,template:"#typeColumnTemplate"},{name:"applicable_tax",orderable:!0},{name:"creation_date",orderable:!0,template:"#creationDateColumnTemplate"},{name:"status",orderable:!0,template:"#statusColumnTemplate"},{name:null,template:"#columnActionTemplate"}];o.taxListDataTable=t.dataTable("#manageTaxList",{url:"manage.tax.list",dtOptions:{searching:!0,order:[[1,"asc"]]},columnsData:n,scope:e}),o.reloadDT=function(){t.reloadDT(o.taxListDataTable)},o.detailDialog=function(e){t.fetch({apiURL:"manage.tax.detailSupportData",taxID:e}).success(function(e){var t=e.data;a.processResponse(e,null,function(){a.showDialog(t,{templateUrl:__globals.getTemplateURL("tax.manage.detail-dialog")},function(e){})})})},o.delete=function(e){__globals.showConfirmation({text:__globals.getJSString("tax_delete_text"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.tax.delete",taxID:e}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),o.reloadDT()})})})}}function t(e,t,a){var o=this;o.ngDialogData=e.ngDialogData,o.currencySymbol=o.ngDialogData.currencySymbol,o.taxData=o.ngDialogData.taxData,o.closeDialog=function(){e.closeThisDialog()}}function a(e,t,a,o){t.fetch("manage.tax.fetch.contries").success(function(t){var n=t.data;a.showDialog(n,{templateUrl:__globals.getTemplateURL("tax.manage.add-dialog")},function(t){_.has(t.value,"tax_added")&&1==t.value.tax_added&&e.$parent.taxListCtrl.reloadDT(),o.go("taxes")})})}function o(e,t,a,o){var n=this,s=e.ngDialogData;n=t.setup(n,"manage_tax_add","taxData"),n.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),n.countries=s.countries,n.taxType=__globals.generateKeyValueItems(s.taxType),n.taxData.active=!0,n.taxData.type=1,n.currencySymbol=s.currencySymbol,n.currency=s.currency,n.submit=function(){t.process("manage.tax.add",n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({tax_added:!0})})})},n.closeDialog=function(){e.closeThisDialog()}}function n(e,t,a,o){t.fetch({apiURL:"manage.tax.editSupportData",taxID:o.params.taxID}).success(function(t){a.processResponse(t,null,function(n){var s=t.data;a.showDialog(s,{templateUrl:__globals.getTemplateURL("tax.manage.edit-dialog")},function(t){_.has(t.value,"tax_updated")&&!0===t.value.tax_updated&&e.$parent.taxListCtrl.reloadDT(),o.go("taxes")})})})}function s(e,t,a,o){var n=this,s=e.ngDialogData;n.updateURL={apiURL:"manage.tax.edit.process",taxID:o.params.taxID},n=t.setup(n,"manage_tax_edit","taxData"),n.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),n.countries=s.countries.data.countries,n=t.updateModel(n,e.ngDialogData),n.taxType=__globals.generateKeyValueItems(s.taxType),n.taxData=s.taxData,n.currencySymbol=s.currencySymbol,n.currency=s.currency,n.submit=function(){t.process(n.updateURL,n).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({tax_updated:!0})})})},n.closeDialog=function(){e.closeThisDialog()}}angular.module("ManageApp.tax",[]).controller("TaxListController",["$scope","__DataStore","appServices",e]).controller("TaxDetailController",["$scope","__DataStore","appServices",t]).controller("TaxAddDialogController",["$scope","__DataStore","appServices","$state",a]).controller("TaxAddController",["$scope","__Form","appServices","$state",o]).controller("TaxEditDialogController",["$scope","__DataStore","appServices","$state",n]).controller("TaxEditController",["$scope","__Form","appServices","$state",s])}(),function(e,t,a){"use strict";t.module("ManageApp.report",[]).controller("ReportController",["__Utils","__Form","$state","appServices","$scope","__DataStore",function(e,a,o,n,s,r){var i=this;i=a.setup(i,"manage_report_list","reportData"),i.reportData.status=1,i.reportData.order=1,i.duration=5,i.monthFirstDay=moment().startOf("month").format("YYYY-MM-DD"),i.monthLastDay=moment().endOf("month").format("YYYY-MM-DD"),i.lastMonthFirstDay=moment().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),i.lastMonthLastDay=moment().subtract(1,"months").endOf("month").format("YYYY-MM-DD"),i.currentWeekFirstDay=moment().startOf("week").format("YYYY-MM-DD"),i.currentWeekLastDay=moment().endOf("week").format("YYYY-MM-DD"),i.lastWeekFirstDay=moment().weekday(-7).format("YYYY-MM-DD"),i.lastWeekLastDay=moment().weekday(-1).format("YYYY-MM-DD"),i.today=moment().format("YYYY-MM-DD"),i.yesterday=moment().subtract(1,"day").format("YYYY-MM-DD"),i.lastYearFirstDay=moment().subtract(1,"year").startOf("year").format("YYYY-MM-DD"),i.lastYearLastDay=moment().subtract(1,"year").endOf("year").format("YYYY-MM-DD"),i.currentYearFirstDay=moment().startOf("year").format("YYYY-MM-DD"),i.currentYearLastDay=moment().endOf("year").format("YYYY-MM-DD"),i.last30Days=moment().subtract(30,"day").format("YYYY-MM-DD"),r.fetch("manage.order.get.config.items").success(function(e){var t=e.data;i.statuses=__globals.generateKeyValueItems(t.orderConfigStatusItems),i.itemName=__ngSupport.getText(__globals.getJSString("status_array_item_in_report")),i.statuses.push({id:9,name:i.itemName}),i.orderList=__globals.generateKeyValueItems(t.orderConfigDateItems)});var l=moment().format("YYYY-MM-DD");i.reportData.start=l,i.reportData.end=l,i.startDateConfig={time:!1},i.endDateConfig={minDate:moment().format("YYYY-MM-DD"),time:!1},s.$watch("reportCtrl.reportData.start",function(e,a){var o=t.element("#end");_.isEmpty(e)?o.bootstrapMaterialDatePicker("setMinDate",""):o.bootstrapMaterialDatePicker("setMinDate",e)}),i.startDateUpdated=function(e){i.reportData.start=e},i.endDateUpdated=function(e){i.reportData.start>i.reportData.end&&(i.reportData.end=e),i.reportData.end=e},i.durationChange=function(e){1==e?(i.reportData.start=i.monthFirstDay,i.reportData.end=i.monthLastDay):2==e?(i.reportData.start=i.lastMonthFirstDay,i.reportData.end=i.lastMonthLastDay):3==e?(i.reportData.start=i.currentWeekFirstDay,i.reportData.end=i.currentWeekLastDay):4==e?(i.reportData.start=i.lastWeekFirstDay,i.reportData.end=i.lastWeekLastDay):5==e?(i.reportData.start=i.today,i.reportData.end=i.today):6==e?(i.reportData.start=i.yesterday,i.reportData.end=i.yesterday):7==e?(i.reportData.start=i.lastYearFirstDay,i.reportData.end=i.lastYearLastDay):8==e?(i.reportData.start=i.currentYearFirstDay,i.reportData.end=i.currentYearLastDay):9==e&&(i.reportData.start=i.last30Days,i.reportData.end=i.today)};var c=[{name:"order_uid",orderable:!0,template:"#orderColumnIdTemplate"},{name:"fname",orderable:!0,template:"#userNameColumnIdTemplate"},{name:"status",orderable:!0,template:"#orderStatusColumnIdTemplate"},{name:"creation_date",orderable:!0,template:"#orderColumnTimeTemplate"},{name:"totalAmount",orderable:!0,template:"#orderColumnTotalAmountTemplate"},{name:null,template:"#orderActionColumnTemplate"}];i.getReports=function(){i.reportListDataTable&&i.reportListDataTable.destroy(),i.reportListDataTable=r.dataTable("#manageReportList",{url:{apiURL:"manage.order.report.get.data",startDate:i.reportData.start,endDate:i.reportData.end,status:i.reportData.status,order:i.reportData.order},dtOptions:{searching:!0},columnsData:c,scope:s},null,i.countData=function(e){i.tableStatus=e.data,i.totalAmounts=e._options.totalAmounts.orderAmountByType,i.excelDownloadURL=e._options.excelDownloadURL,i.reportDuration=__globals.generateKeyValueItems(e._options.duration)})},i.getReports(),i.orderDetailsDialog=function(e){r.fetch({apiURL:"manage.order.details.dialog",orderID:e}).success(function(e){n.processResponse(e,null,function(){var t=e.data;n.showDialog({orderDetails:t.orderDetails},{templateUrl:__globals.getTemplateURL("report.manage.details-dialog")},function(e){})})})}}]).controller("OrderReportController",["$scope",function(e){var t=this;t.ngDialogData=e.ngDialogData;var a=t.ngDialogData.orderDetails.data;t.billingAddress=a.address.billingAddress,t.shippingAddress=a.address.shippingAddress,t.sameAddress=a.address.sameAddress,t.user=a.user,t.order=a.order,t.orderProducts=a.orderProducts,t.coupon=a.coupon,t.taxes=a.taxes,t.shipping=a.shipping,t.close=function(){e.closeThisDialog()}}])}(window,window.angular);