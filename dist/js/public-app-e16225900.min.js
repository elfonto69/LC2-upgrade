/*!
 LivelyCart-2
 version: 2.2.0
 --------------------------------------------------------------------- 
 Build Timestamp: 1502367837
 Build Date: Thu Aug 10 2017 17:53:57 GMT+0530 (IST)
--------------------------------------------------------------------- */
!function(){"use strict";function e(e,t,a){a.startSymbol("[["),a.endSymbol("]]")}angular.module("PublicApp",["ngMessages","ngAnimate","ngSanitize","ui.router","ngNotify","ngDialog","angular-loading-bar","selectize","lw.core.utils","lw.security.main","lw.auth","lw.data.datastore","lw.data.datatable","NgSwitchery","lw.form.main","app.service","app.http","app.notification","app.form","app.menu.directive","app.directives","PublicApp.master","UserApp.login","UserApp.logout","UserApp.forgotPassword","UserApp.resendActivationEmail","UserApp.resetPassword","UserApp.changePassword","UserApp.changeEmail","UserApp.register","UserApp.contact","UserApp.profile","UserApp.profileEdit","UserApp.address","UserApp.Addresslist","UserApp.editAddress","PublicApp.display.products","PublicApp.display.featured.products","PublicApp.productDetails","PublicApp.productDetailsDialog","PublicApp.page.details","PublicApp.ShoppingCart.cart","PublicApp.ShoppingCart.orderSummary","PublicApp.Order.list","PublicApp.Order.details","PublicApp.Order.cancel","PublicApp.Order.log","PublicApp.address"]).run(["__Auth","$state","$rootScope",function(e,t,a){e.verifyRoute(t),a.__ngSupport=window.__ngSupport}]).config(["$stateProvider","$urlRouterProvider","$interpolateProvider",e])}(),function(){"use strict";function e(e,t,a,s,r,o,i){var n=this;a.refresh(function(e){n.auth_info=e}),n.unhandledError=function(){r.error(__globals.getReactionMessage(19))},e.$on("lw.events.state.change_start",function(){s.closeAllDialog()}),e.$on("lw.auth.event.reset",function(e,t){n.auth_info=t}),e.$on("lw.form.event.process.started",function(e,t){$("button.lw-btn-process span").addClass("fa fa-spinner fa-spin"),$("button.lw-btn-process").prop("disabled",!0)}),e.$on("lw.form.event.process.finished",function(e,t){$("button.lw-btn-process span").removeClass("fa fa-spinner fa-spin"),$("button.lw-btn-process").prop("disabled",!1)}),e.$on("lw.form.event.fetch.started",__globals.showFormLoader),e.$on("lw.datastore.event.fetch.finished",__globals.hideFormLoader),e.$on("lw.form.event.process.error",n.unhandledError),e.$on("lw.datastore.event.fetch.error",n.unhandledError),e.$on("lw.update.cart.string",function(e,t){n.cart_string=t.cart_string,n.status=t.status,1==n.status&&$(".lw-shopping-cart-btn").fadeIn("highlight","#FFF",5e3)}),n.breadcrumbs={},n.store_info=window.store_info,e.isPublicApp=window.__appImmutables.publicApp,n.formatAmount=function(e,t,a,s){return __globals.priceFormat(e,t,a)},n.setDocumentPageTitle=function(e){var t;t=_.isEmpty(n.store_info.value)?e:n.store_info.value+" - "+e,angular.element(document).prop("title",t)},n.breadcrumbs.items=[{item:"Home",url:i.href("display_products")}],n.store_info=window.store_info,e.$on("lw.breadcrumb.update.event",function(t,a){e.$on("$stateChangeStart",function(e,t,a,s,r){n.breadcrumbs.items=[{item:"Home",url:i.href("display_products")}]}),_.isEmpty(a[0].items)||_.forEach(a[0].items,function(e,t){n.breadcrumbs.items.push(e)}),n.breadcrumbs.last_item=a[0].last_item}),e.$on("lw.current.route.name",function(e,t){n.routeStatus=t.routeStatus}),n.openCartDialog=function(t){e.$broadcast("lw.isCart.dialog",{dialog:t}),1==t?$("html, body").animate({scrollTop:$("#elementtoScrollToID").offset().top},200):(s.showDialog(n,{templateUrl:__globals.getTemplateURL("shoppingCart.cart-view")},function(e){}),e.$on("ngDialog.opened",function(e,t){$("div.lw-shopping-cart-dialog-content").length&&$("div.ngdialog-content").addClass("lw-shopping-cart-dialog")}))},n.loadCartStatus=!1,n.getCartString=function(){o.fetch("cart.update.cart.string").success(function(e){s.processResponse(e,null,function(t){n.cart_string=e.data.cartString,n.loadPage=e.reaction,n.loadCartStatus=!0,!0===n.status&&$(".shopping-cart-btn").effect("highlight","#FFF",5e3)})})},n.getCartString(),n.isLoggedIn=function(){return n.auth_info.authorized},n.isAdmin=function(){return n.isLoggedIn()&&1===n.auth_info.designation},n.getUserFullName=function(){if(n.isLoggedIn())return n.auth_info.profile.first_name+" "+n.auth_info.profile.last_name}}angular.module("PublicApp.master",[]).controller("PublicController",["$rootScope","$scope","__Auth","appServices","appNotify","__DataStore","$state",e])}(),function(){"use strict";function e(e,t,a,s,r,o,i){var n=this;n.pageData={},n.pageStatus=!1,n.products=[],n.catID=r.params.categoryID,n.showPagination=!1,n.paginationData=__globals.getAppJSItem("productPaginationData"),n.remainingItems=n.paginationData.remainingItems,n.hasMorePages=n.paginationData.hasMorePages,n.categoryData=__globals.getAppJSItem("categoryData"),n.sortOrderUrl=__globals.getAppJSItem("sortOrderUrl"),n.productPrices=__globals.getAppJSItem("productPrices"),n.filterPrices=__globals.getAppJSItem("filterPrices"),n.currentRoute=__globals.getAppJSItem("currentRoute"),n.searchTerm=__globals.getAppJSItem("searchTerm"),n.categoryID=__globals.getAppJSItem("categoryID"),n.pageType=__globals.getAppJSItem("pageType"),n.selectedBrandID=__globals.getAppJSItem("brandID"),n.currenCode=__globals.getAppJSItem("currenSymbol"),n.filterUrl=__globals.getAppJSItem("filterUrl"),n.itemLoadType=__globals.getAppJSItem("itemLoadType"),n.showPagination=function(r){n.isRequestInProcessing=!0,t.fetch(r).success(function(t){a.processResponse(t,null,function(a){var r=t.data;n.productExistOrNot=r.productExistOrNot,n.endOfList=r.paginationData.currentPage==r.paginationData.lastPage,n.remainingItems=r.paginationData.remainingItems,n.hasMorePages=r.paginationData.hasMorePages,n.paginationData=r.paginationData,n.pageType=r.pageType,_.isEmpty(r.products)||_.forEach(r.products,function(t,a){var r=o(s.template("#productListItemTemplate",t))(e);$masonryInstance.append(r),$masonryInstance.imagesLoaded(function(){$masonryInstance.masonry("appended",r),n.isRequestInProcessing=!1})}),$(".lw-product-list-popover").popover({html:!0,content:function(){return __globals.getJSString("addon_option_affect_string")}})})}).error(function(){n.isRequestInProcessing=!1,i.error(__globals.getReactionMessage(19))})},n.isRequestInProcessing=!1,n.scrollPagination=function(){$(window).scroll(function(){if(n.paginationData.currentPage<n.paginationData.lastPage&&$(window).scrollTop()+$(window).height()>$(document).height()-300&&0==n.isRequestInProcessing){n.paginationData.currentPage=n.paginationData.currentPage+1,n.productExistOrNot=!0;var e=n.sortOrderUrl+"page="+n.paginationData.currentPage;n.showPagination(e)}})},1===n.itemLoadType&&n.scrollPagination(),n.loadProductsOnBtnClick=function(){if(n.paginationData.currentPage<n.paginationData.lastPage){n.paginationData.currentPage=n.paginationData.currentPage+1;var e=n.sortOrderUrl+"page="+n.paginationData.currentPage;n.showPagination(e)}},n.dialogStatus=!1,n.showDetailsDialog=function(e,t,s){a.showDialog({categoryID:n.categoryID,productID:t,pageType:s,dialogStatus:n.dialogStatus},{templateUrl:__globals.getTemplateURL("product.details-dialog")},function(e){})},n.filterDailogProduct=function(e){n.brandPageType=!1,t.fetch(e).success(function(e){n.brandsData=e.data.productRelatedBrand,n.selectedIDs=n.brandsData,a.showDialog(n,{templateUrl:__globals.getTemplateURL("product.filter-dialog")},function(e){})})}}function t(e,t,a,s){var r=this;r.dialogData=e.ngDialogData,r.brandsData=r.dialogData.brandsData,r.pageType=e.ngDialogData.pageType,r.currentUrl=r.dialogData.currentRoute,r.productPrices=r.dialogData.productPrices,r.filterPrices=r.dialogData.filterPrices,r.selectedBrandID=r.dialogData.selectedBrandID,r.searchTerm=r.dialogData.searchTerm,r.brandPageType=r.dialogData.brandPageType,r.selectedIDs=r.dialogData.selectedIDs,r.currenCode=r.dialogData.currenCode,r.brandExistStatus=!1,_.isEmpty(r.brandsData)||(r.brandExistStatus=!0),r.priceStatus=!1,r.all_brands_selected=!1,r.unSelectedBrandCount=0,angular.forEach(r.selectedBrandID,function(e,t){_.isEmpty(r.selectedIDs)||(r.unSelectedBrandCount++,angular.forEach(r.selectedIDs,function(t,a){r.selectedIDs[a].brandID==e&&(r.selectedIDs[a].exist=!0)}))}),_.isEmpty(r.brandsData)||r.unSelectedBrandCount!=r.brandsData.length?r.all_brands_selected=!1:r.all_brands_selected=!0,e.$on("ngDialog.opened",function(e,t){if(r.priceStatus=!1,r.productPrices.min_price!=r.productPrices.max_price){r.priceStatus=!0;var a=document.getElementById("lwPriceSlider");noUiSlider.create(a,{start:[r.filterPrices.min_price,r.filterPrices.max_price],connect:!0,behaviour:"snap",tooltips:!0,range:{min:r.productPrices.min_price,max:r.productPrices.max_price},pips:{mode:"range",density:5,format:wNumb({decimals:0,prefix:r.currenCode+" "})},format:{to:function(e){return r.currenCode+" "+Math.round(e)},from:function(e){return e.replace(r.currenCode,"")},decimals:1}}),a.noUiSlider.on("update",function(e,t){var a=e[0];a=a.split(" ");var s=e[1];s=s.split(" "),$(".lw-min-price").prop("value",a[1]).prop("name","min_price"),$(".lw-max-price").prop("value",s[1]).prop("name","max_price")})}}),r.selectAll=function(){r.all_brands_selected?(r.any_brand_selected=!0,r.unSelectedBrandCount=0):(r.any_brand_selected=!1,r.unSelectedBrandCount=r.brandsData.length),angular.forEach(r.brandsData,function(e,t){r.brandsData[t].exist=r.all_brands_selected})},r.select=function(){r.unSelectedBrandCount=0,_.forEach(r.brandsData,function(e){1==e.exist&&r.unSelectedBrandCount++}),r.unSelectedBrandCount==r.brandsData.length?r.all_brands_selected=!0:r.all_brands_selected=!1},r.close=function(){e.closeThisDialog()},r.clearFilter=function(){e.closeThisDialog({close:!0})}}angular.module("PublicApp.display.products",[]).controller("ProductsController",["$scope","__DataStore","appServices","__Utils","$state","$compile","appNotify",e]).controller("ProductsFilterController",["$scope","$compile","__Utils","$rootScope",t])}(),function(){"use strict";function e(e,t,a,s){function r(){if(o.pageData.current_page<o.pageData.last_page&&o.pageStatus&&$(window).scrollTop()+1>=$(document).height()-$(window).height()){o.pageData.current_page+=1;var e=s.apiURL("display.featured.products.list")+"?page="+o.pageData.current_page;o.getFeaturedProducts(e)}}var o=this;o.pageData={},o.pageStatus=!1,o.products=[],a.updateBreadcrumbs([{items:"",last_item:__globals.getJSString("featured_products")}],e),o.getFeaturedProducts=function(e){var s=e||"display.featured.products.list";t.fetch(s).success(function(e){a.processResponse(e,null,function(t){var a=e.data;_.forEach(a.data,function(e,t){o.products.push(e)}),o.pageData={total:a.total,per_page:a.per_page,current_page:a.current_page,last_page:a.last_page,next_page_url:a.next_page_url,prev_page_url:a.prev_page_url,from:a.from,to:a.to},o.pageStatus=!0,o.mediaURL=a.product_assets,o.totalProductCount=a.count})})},o.getFeaturedProducts(),$(window).scroll(r)}angular.module("PublicApp.display.featured.products",[]).controller("DisplayFeaturedProductsController",["$scope","__DataStore","appServices","__Utils",e])}(),function(){"use strict";function e(e,t,a,s,r,o,i,n){var d=this;d.productID=__globals.getAppJSItem("productID"),d.categoryID=__globals.getAppJSItem("categoryID"),d.currencySymbol=__globals.getAppJSItem("currencySymbol"),d.currencyValue=__globals.getAppJSItem("currencyValue"),d=r.setup(d,"add_product_in_cart_form","productData",{modelUpdateWatcher:!1}),d.pageStatus=!1,d.optionLength=!1,d.getProductDetails=function(){t.fetch({apiURL:"product.quick.view.details.support_data",productID:d.productID,"categoryID?":d.categoryID}).success(function(e){a.processResponse(e,null,function(t){var a=e.data.details;d.productDetails=a,d.productData={name:d.productDetails.name,quantity:3,isCartExist:!1},d=r.updateModel(d,d.productData),d.productDetails.basePriceWithAddonPrice=a.newTotalPrice,d.newTotalPriceCount=a.newTotalPriceCount,d.productDetails.selectedOptions=a.getSelectedOptions,d.productDetails&&(d.productData.name=a.name),_.isEmpty(d.productDetails.getSelectedOptions)||(d.optionLength=!0),d.productDetails.priceDetails={option:a.getSelectedOptions,total:a.getPrice.total,base_price:a.getPrice.base_price},a.qtyCart>0?(d.productData.quantity=a.qtyCart,d.checkNumber=!0):d.productData.quantity=1,d.btnQuantity=a.qtyCart,d.productData.isCartExist=a.isCartExist,d.pageStatus=!0})})},d.getProductDetails(),d.getQtyAction=function(e,t){if(1==e)void 0==t||isNaN(t)?d.productData.quantity=1:d.productData.quantity=t+1;else{var a=t-1;d.productData.quantity=a<=0?1:a}},d.cartAction=!1,d.addToCart=function(){r.process({apiURL:"cart.add.item",productID:d.productID},d).success(function(t){d.cartAction=!0;t.data;a.processResponse(t,null,function(){d.data={cart_string:t.data.cartItems,status:!0},d.updateCartRow(d.productID,!0),e.$emit("lw.update.cart.string",d.data)})})},o.$on("remove.cart.row",function(e,t){t.status&&d.updateCartRow(d.productID,!0)}),d.updateCartRow=function(e,t){var s=!0;d.addonPrices=[],void 0!=d.productData.options&&(d.productDetails.selectedOptions=d.productData.options[e],angular.forEach(d.productData.options[e],function(e,t){this.push({option_name:t,value_name:e.name,addon_price:e.addon_price_format})},d.addonPrices),angular.forEach(d.productData.options[e],function(e,t){""==e&&(s=!1)},s)),r.process({apiURL:"cart.product.qty.update",productID:e},d).success(function(e){a.processResponse(e,null,function(t){var a=e.data;d.productDetails.basePriceWithAddonPrice=a.formatedTotalPrice,d.productDetails.priceDetails={option:d.productDetails.selectedOptions,total:a.totalPrice,base_price:a.base_price},d.productData.isCartExist=a.isCartExist,a.qtyCart>0?(d.productData.quantity=a.qtyCart,d.btnQuantity=a.qtyCart):(d.btnQuantity=0,d.productData.quantity=1)})})}}angular.module("PublicApp.productDetails",[]).controller("ProductDetailsController",["$scope","__DataStore","appServices","$stateParams","__Form","$rootScope","$state","__Utils",e])}(),function(){"use strict";function e(e,t,a,s,r,o){var i=this;i.categoryID=e.ngDialogData.categoryID,i.productID=e.ngDialogData.productID,i.pageType=e.ngDialogData.pageType,i.dialogStatus=e.ngDialogData.dialogStatus,i=r.setup(i,"add_product_in_cart_form","productData",{modelUpdateWatcher:!1}),i.pageStatus=!1,i.optionLength=!1,i.details=function(){t.fetch({apiURL:"product.quick.view.details.support_data",productID:i.productID,"categoryID?":i.categoryID}).success(function(e){a.processResponse(e,null,function(t){var a=e.data.details;i.productDetails=a,i.productDetails.categories=a.categories,i.productDetails.basePriceWithAddonPrice=a.newTotalPrice,i.newTotalPriceCount=a.newTotalPriceCount,i.productDetails.selectedOptions=a.getSelectedOptions,i.oldPrice=i.productDetails.old_price,i.productDetails&&(i.productData.name=a.name),_.isEmpty(i.productDetails.selectedOptions)||(i.optionLength=!0),i.productDetails.priceDetails={option:a.getSelectedOptions,total:a.getPrice.total,base_price:a.getPrice.base_price},a.qtyCart>0?(i.productData.quantity=a.qtyCart,i.checkNumber=!0):i.productData.quantity=1,i.btnQuantity=a.qtyCart,i.productData.isCartExist=a.isCartExist,i.pageStatus=!0})})},i.details(),i.getQtyAction=function(e,t){if(1==e)void 0==t||isNaN(t)?i.productData.quantity=1:i.productData.quantity=t+1;else{var a=t-1;i.productData.quantity=a<=0?1:a}},i.cartAction=!1,i.addToCart=function(){r.process({apiURL:"cart.add.item",productID:i.productID},i).success(function(t){i.cartAction=!0;t.data;a.processResponse(t,null,function(){i.data={cart_string:t.data.cartItems,status:!0},i.updateCartItem(i.productID,!0),e.$emit("lw.update.cart.string",i.data)})})},i.updateCartItem=function(e,t){var s=!0;i.addonPrices=[],void 0!=i.productData.options&&(i.productDetails.selectedOptions=i.productData.options[e],angular.forEach(i.productData.options[e],function(e,t){this.push({option_name:t,value_name:e.name,addon_price:e.addon_price_format})},i.addonPrices),angular.forEach(i.productData.options[e],function(e,t){""==e&&(s=!1)},s)),r.process({apiURL:"cart.product.qty.update",productID:e},i).success(function(e){a.processResponse(e,null,function(t){var a=e.data;i.productDetails.basePriceWithAddonPrice=a.totalPrice,i.productDetails.priceDetails={option:i.productDetails.selectedOptions,total:a.totalPrice,base_price:a.base_price},i.productData.isCartExist=a.isCartExist,a.qtyCart>0?(i.productData.quantity=a.qtyCart,i.btnQuantity=a.qtyCart):(i.btnQuantity=0,i.productData.quantity=1)})})}}angular.module("PublicApp.productDetailsDialog",[]).controller("ProductDetailsDialogController",["$scope","__DataStore","appServices","$stateParams","__Form","__Utils",e])}(),function(){"use strict";function e(e,t,a,s){var r=this,o={apiURL:"display.page.details",pageID:t.params.pageID},i=__globals.getActivePagesData(),n=__globals.findParents(i,t.params.pageID),d=n.reverse(),c=d.length-1;_.forEach(n,function(e,t){t==c&&(r.last_page=e.title)}),0===c?a.updateBreadcrumbs([{items:"",last_item:r.last_page}],e):_.forEach(_.initial(d),function(s,o){a.updateBreadcrumbs([{items:[{item:s.title,url:s.link?s.link:t.href("display_page_details",{pageID:s.key,pageTitle:__globals.slug(s.title)})}],last_item:r.last_page}],e)}),r.getPageInfo=function(){s.fetch(o,r).success(function(e){a.processResponse(e,null,function(){var t=e.data;r.pageDetails=t})})},r.getPageInfo()}angular.module("PublicApp.page.details",[]).controller("DisplayPageDetailsController",["$scope","$state","appServices","__DataStore",e])}(),function(){"use strict";function e(e,t,a,s,r,o){var i=this;i.userInfo=o.authInfo(),i=r.setup(i,"update_cart_form","cartData",{modelUpdateWatcher:!1}),i.cartDataStatus=!1,i.cartData={},i.disabledStatus=!1,i.dataExistStatus=!1,i.getContentCart=function(){s.fetch("cart.get.data").success(function(e){a.processResponse(e,null,function(a){var s=e.data;if(i.anyCartItemInvalid=s.isValidItem,i.cartData.items=s.cartItems,i.cartData.totalPrice=s.total,i.cartItemStatus=s.cartItemStatus,i.currentRoute=s.currentRoute,i=r.updateModel(i,i.cartData),i.currentRoute==document.location.href)var o=!0;else var o=!1;i.pageType=o,i.data={routeStatus:o},_.isEmpty(s.cartItems)||0==s.isValidItem?i.disabledStatus=!1:i.disabledStatus=!0,i.cartDataStatus=!0,t.$emit("lw.current.route.name",i.data)})})},i.getContentCart();var n;i.updateQuantity=function(s,o,d,c){var l=Number(Math.round(d));if(i.cartData.items[o].qtyStatus=!1,"eventUp"==s)l>1?l>99999&&(i.cartData.items[o].qty=l):(i.cartData.items[o].qty=1,i.cartData.items[o].qtyStatus=!0);else if(1==s)i.cartData.items[o].qty=l+1;else{var u=l-1;i.cartData.items[o].qty=u<=0?1:u}o&&(window.clearTimeout(n),n=window.setTimeout(function(){r.process({apiURL:"cart.update.qty",itemID:o},i).success(function(s){a.processResponse(s,null,function(){var a=s.data;i.cartData.items[o].new_price=a.new_price,i.cartData.items[o].new_subTotal=a.new_subTotal,i.cartData.items[o].qty=a.qty,i.cartData.items[o].price=a.price,i.cartData.totalPrice=a.total,i.cartData.items[o].qtyStatus=!0,i.data={cart_string:a.cartItems,status:!0},i.qtyStatus=!0,t.$emit("lw.update.cart.string",i.data),e.$emit("remove.cart.row",{status:!0})})})},500))},i.cancel=function(){t.closeThisDialog()},i.removeCartItem=function(r){s.post({apiURL:"cart.remove.item",itemID:r},i).success(function(s){a.processResponse(s,null,function(a){e.$emit("changeItems",{status:!0}),i.data={cart_string:s.data.cartItems,status:!0},t.$emit("lw.update.cart.string",i.data),$("#rowid_"+r).fadeOut("slow",function(){}),i.getContentCart()})})},i.removeAllItemsItem=function(){s.post("cart.remove.all.items",i).success(function(s){a.processResponse(s,null,function(a){i.cartData.items="",i.data={cart_string:s.data.cartItems,status:!0},t.$emit("lw.update.cart.string",i.data),e.$emit("remove.cart.row",{status:!0}),e.$emit("changeItems",{status:!0}),i.getContentCart()})})}}angular.module("PublicApp.ShoppingCart.cart",[]).controller("CartController",["$rootScope","$scope","appServices","__DataStore","__Form","__Auth",e])}(),function(){"use strict";function e(e,t,a,s,r,o,i){var n=this;n=t.setup(n,"cart_order_form","orderData",{modelUpdateWatcher:!1}),n.couponMessage=!1,n.orderData.addressID=null,n.orderData.addressID1=null,n.pageStatus=!1,n.getCartOrderDetails=function(r,o,i){_.isUndefined(r)?n.addressID=null:n.addressID=r,_.isUndefined(o)?n.addressID1=null:n.addressID1=o,_.isUndefined(i)?n.couponCode=null:n.couponCode=i,a.fetch({apiURL:"order.summary.details",addressID:n.addressID,addressID1:n.addressID1,couponCode:n.couponCode},{fresh:!0}).success(function(a){s.processResponse(a,null,function(s){var r=a.data.orderSummaryData.data;n.orderSupportData={cartItems:r.cartItems,itemIsInvalid:r.itemIsInvalid,shippingAddress:r.shippingAddress,sameAddress:r.sameAddress,billingAddress:r.billingAddress,shipping:r.shipping.info,formatedCartTotalPrice:r.total.cartTotal,cartTotalPrice:r.total.totalBasePrice,currency:r.total.currency,afterAddShipingTotal:r.shipping.totalPrice,taxses:r.taxses.info,formatedTotalTaxAmount:r.taxses.formatedTotalTaxAmount,afterAddTaxTotal:r.taxses.totalPrice,totalPayableAmount:r.totalPayableAmount,totalPayableAmountForStripe:r.totalPayableAmountForStripe,totalPayableAmountFormated:r.totalPayableAmountFormated,fullName:r.user.fullName,couponData:_.isEmpty(r.couponData)?null:r.couponData.couponData,subtotalPrice:r.shipping.formettedDiscountPrice,checkoutMethod:r.checkoutMethod,checkoutMethodInfo:r.checkoutMethodInfo};var o=_.isEmpty(n.addressID)?_.isEmpty(n.orderSupportData.shippingAddress)?null:n.orderSupportData.shippingAddress.id:n.addressID,i=_.isEmpty(n.addressID1)?_.isEmpty(n.orderSupportData.billingAddress)?null:n.orderSupportData.billingAddress.id:n.addressID;n.orderData={fullName:r.user.fullName,userEmail:r.user.userEmail,stripeKey:r.stripeKey,description:r.description,addressID:o,checkout_method:n.orderData.checkout_method,sameAddress:n.orderSupportData.sameAddress,addressID1:i,totalPayableAmount:n.orderSupportData.totalPayableAmount,totalPayableAmountForStripe:r.totalPayableAmountForStripe,couponCode:n.couponCode,currency:r.total.currency,totalTaxAmount:r.taxses.totalTaxAmount,totalShippingAmount:r.shipping.totalShippingAmount},n.couponData=_.isEmpty(r.couponData)?null:r.couponData,n=t.updateModel(n,n.orderData),n.isValidItem=r.isValidItem,_.isUndefined(n.orderData.checkout_method)&&(n.disabledStatus=!1),n.orderSupportData.shippingAddress&&4!==n.orderSupportData.shipping.type||(n.disabledStatus=!1),r.orderRoute==document.location.href?n.showCartBtn=!0:n.showCartBtn=!1,n.data={routeStatus:n.showCartBtn},e.$emit("lw.current.route.name",n.data),n.pageStatus=!0})})},n.getCartOrderDetails(),n.checkValidDataForSubmit=function(e){n.isValidItem&&n.orderSupportData.shippingAddress&&4!==n.orderSupportData.shipping.type&&(n.disabledStatus=!0)},n.orderData.coupon="",n.applyCoupon=function(e){a.post({apiURL:"order.coupon.apply"},n).success(function(e){s.processResponse(e,function(t){n.couponData=e.data.couponData,n.couponStatus=t,n.invalidCouponCode=e.data.couponCode,n.couponMessage=!0,n.orderData.subtotalPrice=e.data.totalPrice;var a=_.isEmpty(n.orderData.addressID)?_.isEmpty(n.orderSupportData.shippingAddress)?null:n.orderSupportData.shippingAddress.id:n.orderData.addressID,s=_.isEmpty(n.orderData.addressID1)?_.isEmpty(n.orderSupportData.billingAddress)?null:n.orderSupportData.billingAddress.id:n.orderData.addressID1;n.getCartOrderDetails(a,s,n.couponData.couponCode),n.validCouponAmtMessage=__ngSupport.getText(__globals.getJSString("order_coupon_amount_text"),{__amount__:n.couponData}),n.orderData.code=""})})},n.disabledStatus=!0,n.removeCoupon=function(){n.getCartOrderDetails(n.orderData.addressID,n.orderData.addressID1,null),n.couponMessage=!1,n.couponStatus=null,_.isEmpty(n.couponData.discountFormate)||(n.couponData.discountFormate="")},n.removeAllInvlidCartItem=function(t){a.post("cart.remove.invalid.item",n).success(function(t){s.processResponse(t,null,function(a){n.data={cart_string:t.data.cartItems,status:!0},e.$emit("lw.update.cart.string",n.data),o.$emit("remove.cart.row",{status:!0}),n.getCartOrderDetails(n.orderData.addressID,n.orderData.addressID1,n.couponCode)})})},n.updatOrderSummary=function(a){var s=a.orderSummaryData;n.orderSupportData={cartItems:s.cartItems,itemIsInvalid:s.itemIsInvalid,shippingAddress:s.shippingAddress,sameAddress:s.sameAddress,billingAddress:s.billingAddress,shipping:s.shipping.info,formatedCartTotalPrice:s.total.cartTotal,formatedTotalTaxAmount:s.taxses.formatedTotalTaxAmount,cartTotalPrice:s.total.totalBasePrice,currency:s.total.currency,afterAddShipingTotal:s.shipping.totalPrice,taxses:s.taxses.info,afterAddTaxTotal:s.taxses.totalPrice,totalPayableAmount:s.totalPayableAmount,totalPayableAmountFormated:s.totalPayableAmountFormated,fullName:s.user.fullName,couponData:_.isEmpty(s.couponData)?null:s.couponData.couponData,subtotalPrice:s.shipping.formettedDiscountPrice,checkoutMethod:s.checkoutMethod,checkoutMethodInfo:s.checkoutMethodInfo};var r=_.isEmpty(n.orderData.addressID)?_.isEmpty(n.orderSupportData.shippingAddress)?null:n.orderSupportData.shippingAddress.id:n.orderData.addressID,o=_.isEmpty(n.orderData.addressID1)?_.isEmpty(n.orderSupportData.billingAddress)?null:n.orderSupportData.billingAddress.id:n.orderData.addressID1;n.orderData={fullName:s.user.fullName,userEmail:s.user.userEmail,description:s.description,stripeKey:s.stripeKey,addressID:r,checkout_method:n.orderData.checkout_method,sameAddress:n.orderSupportData.sameAddress,addressID1:o,totalPayableAmount:n.orderSupportData.totalPayableAmount,totalPayableAmountForStripe:s.totalPayableAmountForStripe,couponCode:n.couponCode,currency:s.total.currency,totalTaxAmount:s.taxses.totalTaxAmount,totalShippingAmount:s.shipping.totalShippingAmount},n=t.updateModel(n,n.orderData),0==s.isValidItem?(n.isValidItem=!1,n.disabledStatus=!1):n.disabledStatus=!0,s.orderRoute==document.location.href?n.showCartBtn=!0:n.showCartBtn=!1,n.data={routeStatus:n.showCartBtn},e.$emit("lw.current.route.name",n.data),n.pageStatus=!0},n.orderData.totalDiscountAmount=0,n.handleOrderValidationErrors=function(e,t){3==e&&s.showDialog(t,{templateUrl:__globals.getTemplateURL("order.user.alert-dialog")},function(e){if(_.has(e,"value")&&!0===e.value.is_submit_order){var t=_.isEmpty(n.orderData.addressID)?_.isEmpty(n.orderSupportData.shippingAddress)?null:n.orderSupportData.shippingAddress.id:n.orderData.addressID,a=_.isEmpty(n.orderData.addressID1)?_.isEmpty(n.orderSupportData.billingAddress)?null:n.orderSupportData.billingAddress.id:n.orderData.addressID1,s=_.isEmpty(n.couponData)?null:n.couponData.couponCode;n.getCartOrderDetails(t,a,s)}else __globals.redirectBrowser(r.apiURL("cart.view"))})},n.orderSubmit=function(){if(__globals.showProcessingDialog(),e.$parent.publicCtrl.isLoggedIn()||__globals.redirectBrowser(r.apiURL("user.login")),!_.has(n,"couponData")||_.isUndefined(n.couponData)||_.isEmpty(n.couponData)||(n.orderData.totalDiscountAmount=n.couponData.discount),6===n.orderData.checkout_method){var o=n.orderData,i=null,d=null,c=StripeCheckout.configure({key:o.stripeKey,locale:"auto",description:o.description,email:o.userEmail,amount:o.totalPayableAmountForStripe,currency:o.currency,allowRememberMe:!1,token:function(e){d=e.id,a.post("order.stripe.checkout",_.assign({stripeToken:e.id,checkout_method:6},n.orderData),n).success(function(e){i=e.data,s.processResponse(e,function(t){1!==e.reaction&&i.orderPaymentToken?__globals.redirectBrowser(r.apiURL("order.payment_cancelled",{orderToken:i.orderPaymentToken})):1!==e.reaction&&(n.handleOrderValidationErrors(t,e),2==t&&_.has(e.data,"orderSummaryData")&&n.updatOrderSummary(e.data))},function(){__globals.redirectBrowser(r.apiURL("order.thank_you_stripe",{orderToken:i.orderPaymentToken}))})})},opened:function(){__globals.hideProcessingDialog()},closed:function(){d?__globals.showProcessingDialog():!_.isEmpty(i)&&i.orderPaymentToken&&__globals.redirectBrowser(r.apiURL("order.payment_cancelled",{orderToken:i.orderPaymentToken}))}}).open();window.addEventListener("popstate",function(){c.close()})}else t.process("order.process",n).success(function(e){s.processResponse(e,{then:function(t){n.handleOrderValidationErrors(t,e),2==t&&_.has(e.data,"orderSummaryData")&&n.updatOrderSummary(e.data)}},function(){1==e.reaction&&1==e.data.ckMethod?__globals.redirectBrowser(r.apiURL("order.paypal.checkout",{orderUID:e.data.orderID})):1==e.reaction&&__globals.redirectBrowser(r.apiURL("my_order.details",{orderUID:e.data.orderID}))})})},n.sameAsAddress=function(e,t){0==e?(n.orderSupportData.billingAddress="",n.orderData.addressID1=""):n.getCartOrderDetails(n.orderData.addressID,n.orderData.addressID,n.couponCode),n.orderData.sameAddress=e},n.openAddressListDialog=function(e,t){s.showDialog(n,{templateUrl:__globals.getTemplateURL("address.list-dialog")},function(a){if(!_.isUndefined(a.value)&&"$closeButton"!=a.value){var s=a.value.selectedAddress;0==e&&"billing"==t?(n.orderSupportData.billingAddress=s,n.orderData.addressID1=s.id,n.orderSupportData.sameAddress=!1,n.getCartOrderDetails(n.orderData.addressID,n.orderData.addressID1,n.couponCode)):1==e&&"billing"==t?(n.orderSupportData.shippingAddress=s,n.orderSupportData.billingAddress=s,n.orderData.addressID=s.id,n.orderData.addressID1=s.id):1==e&&"shipping"==t?(n.orderSupportData.shippingAddress=s,n.orderSupportData.billingAddress=s,n.orderData.addressID=s.id,n.orderData.addressID1=s.id,n.getCartOrderDetails(n.orderData.addressID,n.orderData.addressID1,n.couponCode),4!==n.orderSupportData.shipping.type&&(n.disabledStatus=!0)):0==e&&"shipping"==t&&(n.orderSupportData.shippingAddress=s,n.orderData.addressID=s.id,n.orderData.addressID1=_.isEmpty(n.orderData.addressID1)?n.orderSupportData.billingAddress.id:n.orderData.addressID1,4!==n.orderSupportData.shipping.type&&(n.disabledStatus=!0),_.isEmpty(n.orderData.addressID)||n.orderData.addressID!==n.orderData.addressID1||(n.orderData.addressID1=s.id,n.orderSupportData.sameAddress=!0),n.getCartOrderDetails(n.orderData.addressID,n.orderData.addressID1,n.couponCode))}})},n.removeCartItem=function(t){a.post({apiURL:"cart.remove.item",itemID:t},n).success(function(a){s.processResponse(a,null,function(s){n.data={cart_string:a.data.cartItems,status:!0},e.$emit("lw.update.cart.string",n.data),$("#rowid_"+t).fadeOut("slow",function(){$(this).remove()}),n.getCartOrderDetails()})})},n.removeAllCartItem=function(t){a.post("cart.remove.invalid.item",n).success(function(t){s.processResponse(t,null,function(a){n.data={cart_string:t.data.cartItems,status:!0},e.$emit("lw.update.cart.string",n.data),n.getCartOrderDetails()})})}}function t(e){var t=this;t.pageStatus=!1,e.ngDialogData&&(t.message=e.ngDialogData.data.message,t.pageStatus=!0),t.yesSubmitIt=function(){e.closeThisDialog({is_submit_order:!0})},t.closeDialog=function(){e.closeThisDialog({is_submit_order:!1})}}angular.module("PublicApp.ShoppingCart.orderSummary",[]).controller("OrderSummaryController",["$scope","__Form","__DataStore","appServices","__Utils","$rootScope","appNotify",e]).controller("AlertDialogController",["$scope",t])}(),function(){"use strict";function e(e,t,a,s,r,o){var i=this,n=[{name:"order_uid",orderable:!0,template:"#orderColumnIdTemplate"},{name:"status",orderable:!0,template:"#orderStatusColumnIdTemplate"},{name:"creation_date",orderable:!0,template:"#orderColumnTimeTemplate"},{name:null,template:"#orderActionColumnTemplate"}],d={active:{id:"activeTabList",status:1},cancelled:{id:"cancelledTabList",status:3},completed:{id:"completedTabList",status:6}};$("#adminOrderList a").click(function(e){e.preventDefault();var t=$(this),a=t.attr("aria-controls"),s=d[a];_.isEmpty(s)||($(this).tab("show"),i.getOrders(s.id,s.status))}),i.getOrders=function(a,s){i.cartOrderListDataTable&&i.cartOrderListDataTable.destroy(),i.cartOrderListDataTable=t.dataTable("#"+a,{url:{apiURL:"cart.get.orders.data",status:s},dtOptions:{searching:!0,order:[[2,"desc"]],columnDefs:[{targets:[1],searchable:!1}]},columnsData:n,scope:e})},i.getOrders("activeTabList",1),i.reloadDT=function(){t.reloadDT(i.cartOrderListDataTable)},i.logDialog=function(e){t.fetch({apiURL:"order.log.dialog",orderID:e}).success(function(e){a.processResponse(e,null,function(){9==e.reaction&&(window.location=o.apiURL("user.login"));var t=e.data;a.showDialog({order:t.cartOrder,orderLog:t.orderLog},{
templateUrl:__globals.getTemplateURL("order.user.log")},function(e){})})})},i.cancelDialog=function(e){t.fetch({apiURL:"cart.order.cancel",orderID:e}).success(function(e){a.processResponse(e,null,function(){var t=e.data;a.showDialog({orderData:t.order},{templateUrl:__globals.getTemplateURL("order.user.cancel")},function(e){_.has(e.value,"order_updated")&&!0===e.value.order_updated&&i.reloadDT()})})})}}angular.module("PublicApp.Order.list",[]).controller("MyOrderListController",["$scope","__DataStore","appServices","$stateParams","__Auth","__Utils",e])}(),function(){"use strict";function e(e,t,a,s){var r=this;r.pageStatus=!1,r.orderData=__globals.getAppJSItem("orderDetails");var o=r.orderData.data;r.billingAddress=o.address.billingAddress,r.shippingAddress=o.address.shippingAddress,r.sameAddress=o.address.sameAddress,r.user=o.user,r.order=o.order,r.orderProducts=o.orderProducts,r.coupon=o.coupon,r.taxes=o.taxes,r.shipping=o.shipping,r.pageStatus=!0,r.updatePayment=function(e){__globals.redirectBrowser(a.apiURL("order.paypal.checkout",{orderUID:e}))},r.contactStoreDialog=function(e){s.showDialog({orderUID:e},{templateUrl:__globals.getTemplateURL("order.user.contact-store")},function(e){})}}angular.module("PublicApp.Order.details",[]).controller("MyOrderDetailsController",["$scope","__Form","__Utils","appServices",e])}(),function(){"use strict";function e(e,t){var a=this;a=t.setup(a,"cart_order_log_dialog_form","cartData",{secured:!0}),a.ngDialogData=e.ngDialogData,a.order=a.ngDialogData.order,a.orderLog=a.ngDialogData.orderLog,a.close=function(){e.closeThisDialog()}}angular.module("PublicApp.Order.log",[]).controller("MyOrderLogController",["$scope","__Form",e])}(),function(){"use strict";function e(e,t,a){var s=this;s=t.setup(s,"form_order_update","orderData"),s.ngDialogData=e.ngDialogData,s=t.updateModel(s,s.orderData),s.cancel=function(){t.process({apiURL:"cart.order.cancel.process",orderID:s.ngDialogData.orderData._id},s).success(function(t){a.processResponse(t,null,function(t){e.closeThisDialog({order_updated:!0})})})},s.closeDialog=function(){e.closeThisDialog()}}angular.module("PublicApp.Order.cancel",[]).controller("CancelMyOrderController",["$scope","__Form","appServices",e])}(),function(e,t,a){"use strict";t.module("PublicApp.address",[]).controller("AddressListController",["__Utils","__Form","$state","appServices","$scope","__DataStore",function(e,t,a,s,r,o){var i=this;i=t.setup(i,"user_address_form","addressData"),i.pageStatus=!1,i.getAddresses=function(){o.fetch("user.get.addresses").success(function(e){s.processResponse(e,null,function(){var t=e.data;i.addressData=t,i.pageStatus=!0})})},i.getAddresses(),i.delete=function(e){__globals.showConfirmation({text:__globals.getJSString("address_delete_text"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){o.post({apiURL:"user.address.delete",addressID:e}).success(function(t){var a=t.data.message;s.processResponse(t,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:a,type:"error"})}},function(t){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:a,type:"success"}),$("#address_"+e).fadeOut("slow",function(){$(this).remove(),i.getAddresses()})})})})},i.addAddressDialog=function(){i.addressType=i.addressData.addressType,i.countries=i.addressData.countries.data,s.showDialog(i,{templateUrl:__globals.getTemplateURL("address.add")},function(e){_.has(e.value,"address_added")&&!0===e.value.address_added&&i.getAddresses()})},i.editAddressDialog=function(e){o.fetch({apiURL:"user.fetch.address.support.data",addressID:e}).success(function(e){i.countries=e.data.countries,i.address=e.data.address,i.addressType=e.data.addressType,s.showDialog(i,{templateUrl:__globals.getTemplateURL("address.edit")},function(e){_.has(e.value,"address_updated")&&1==e.value.address_updated&&i.getAddresses()})})},i.addressListDialog=function(){o.fetch({apiURL:"get.addresses.for.order"}).success(function(e){var t=e.data;i.addressData=t,s.showDialog(t,{templateUrl:__globals.getTemplateURL("address.list-dialog")},function(e){})})},i.close=function(){r.closeThisDialog()},i.selectAddressForOrder=function(e,t){_.isEmpty(e)?r.closeThisDialog({selectedAddress:""}):_.forEach(e,function(e,a){e.id==t&&r.closeThisDialog({selectedAddress:e})})},i.makePrimaryAddress=function(e){t.process({apiURL:"user.get primary.address",addressID:e},i).success(function(e){e.data.message;s.processResponse(e,null,function(){i.getAddresses()})})}}]).controller("AddressAddController",["$scope","__Form","appServices",function(e,t,a){var s=this;s=t.setup(s,"user_address_form","userData",{secured:!1}),s.ngDialogData=e.ngDialogData.addressData,s.addressType=s.ngDialogData.addressType,s.countriesCollection=s.ngDialogData.countries.data,s.countries=s.countriesCollection.countries,s.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),s.submit=function(){t.process("user.address.process",s).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog({address_added:!0})})})},s.close=function(){e.closeThisDialog()}}]).controller("AddressEditController",["$scope","__Form","appServices",function(e,t,a){var s=this;s=t.setup(s,"user_address_edit_form","addressData"),s.addressType=e.ngDialogData.addressType,s.addressData=e.ngDialogData.address,s.countriesCollection=e.ngDialogData.countries.data,s.countries=s.countriesCollection.countries,s.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),s.update=function(){s.updateURL={apiURL:"user.address.update",addressID:s.addressData.id},t.process(s.updateURL,s).success(function(t){a.processResponse(t,null,function(t){e.closeThisDialog({address_updated:!0})})})},s.close=function(){e.closeThisDialog()}}])}(window,window.angular),function(){"use strict";angular.module("UserApp.login",[]).controller("UserLoginController",["__Form","__Auth","appServices","__Utils",function(e,t,a,s){var r=this;r=e.setup(r,"form_user_login","loginData",{secured:!0}),r.show_captcha=!1,r.request_completed=!1,e.fetch("user.login.attempts").success(function(e){r.show_captcha=e.data.show_captcha,r.request_completed=!0}),r.getCaptchaURL=function(){return s.apiURL("security.captcha")+"?ver="+Math.random()},r.refreshCaptcha=function(){r.captchaURL=r.getCaptchaURL()},r.captchaURL=r.getCaptchaURL(),r.submit=function(){r.isInActive=!1,e.process("user.login",r).success(function(e){var o=e.data;a.processResponse(e,{error:function(){r.show_captcha=o.show_captcha,r[r.ngFormModelName].password="",r.show_captcha&&(r[r.ngFormModelName].confirmation_code="",r.refreshCaptcha())},otherError:function(e){r.isInActive=o.isInActive,3==e&&r.show_captcha&&r.refreshCaptcha()}},function(){t.checkIn(o.auth_info,function(){o.intendedUrl?__globals.redirectBrowser(o.intendedUrl):1==o.auth_info.designation?__globals.redirectBrowser(s.apiURL("manage.app")):__globals.redirectBrowser(window.appConfig.appBaseURL)})})})}}])}(),function(){"use strict";function e(e,t,a){e.post("user.logout").success(function(e){a.processResponse(e,function(a){t.checkIn(e.data.auth_info)})})}angular.module("UserApp.logout",[]).controller("UserLogoutController",["__DataStore","__Auth","appServices",e])}(),function(){"use strict";angular.module("UserApp.forgotPassword",[]).controller("UserForgotPasswordController",["__Form","appServices","__Utils",function(e,t,a){var s=this;s=e.setup(s,"user_forgot_password_form","userData",{secured:!0}),s.submit=function(){e.process("user.forgot_password.process",s).success(function(e){t.processResponse(e,null,function(){__globals.redirectBrowser(a.apiURL("user.forgot_password.success"))})})}}])}(),function(){"use strict";angular.module("UserApp.resetPassword",[]).controller("UserResetPasswordController",["__Form","appServices","__Utils",function(e,t,a){var s=this;s=e.setup(s,"user_reset_password_form","userData",{secured:!0}),s.submit=function(){e.process({apiURL:"user.reset_password.process",reminderToken:__globals.getAppJSItem("passwordReminderToken")},s).success(function(e){t.processResponse(e,null,function(e){window.location=a.apiURL("user.login")})})}}])}(),function(){"use strict";angular.module("UserApp.changePassword",[]).controller("UserChangePasswordController",["__Form","appServices","__Utils","$state",function(e,t,a,s){var r=this;r=e.setup(r,"user_password_update_form","userData",{secured:!0}),r.submit=function(){e.process("user.change_password.process",r).success(function(e){t.processResponse(e,null,function(){r.userData={},document.location.href==e.data.passwordRoute?window.location=window.appConfig.appBaseURL:s.go("dashboard")})})}}])}(),function(){"use strict";angular.module("UserApp.changeEmail",[]).controller("UserChangeEmailController",["__Form","appServices",function(e,t){var a=this;a.requestSuccess=!1,a.pageStatus=!1,a=e.setup(a,"user_change_email_form","userData",{secured:!0}),e.fetch("user.change_email.support_data").success(function(e){var s=e.data;t.processResponse(e,null,function(){a.changeEmail=s.newEmail,a.formattedDate=s.formattedDate,a.humanReadableDate=s.humanReadableDate,a.pageStatus=!0})}),a.submit=function(){e.process("user.change_email.process",a).success(function(e){var s=e.data;t.processResponse(e,null,function(){a.userData={},1==e.reaction&&(a.activationRequired=s.activationRequired,a.requestSuccess=!0,$(".lw-form").slideUp())})})}}])}(),function(){"use strict";angular.module("UserApp.register",[]).controller("UserRegisterController",["__Form","$state","appServices","__Utils",function(e,t,a,s){var r=this;r=e.setup(r,"user_register_form","userData",{secured:!0}),r.getCaptchaURL=function(){return s.apiURL("security.captcha")+"?ver="+Math.random()},r.refreshCaptcha=function(){r.captchaURL=r.getCaptchaURL()},r.captchaURL=r.getCaptchaURL(),r.errorMessage=!1,r.submit=function(){r.isInActive=!1,e.process("user.register.process",r).success(function(e){var t=e.data;a.processResponse(e,{error:function(){},otherError:function(){3!=e.reaction||_.isEmpty(e.message)||(r.errorMessage=e.message),r.isInActive=t.isInActive,r[r.ngFormModelName].password="",r[r.ngFormModelName].password_confirmation="",r[r.ngFormModelName].confirmation_code="",r.refreshCaptcha()}},function(){__globals.redirectBrowser(s.apiURL("user.register.success"))})})},r.showTermsAndConditionsDialog=function(){a.showDialog(r,{templateUrl:__globals.getTemplateURL("user.terms-and-conditions")},function(e){})}}])}(),function(){"use strict";function e(e,t,a,s,r,o){var i=this;i=e.setup(i,"user_contact_form","userData",{secured:!0,unsecuredFields:["message"]}),r.refresh(function(e){i.auth_info=e}),9!=i.auth_info.reaction_code&&(i.userData.email=i.auth_info.profile.email,i.userData.fullName=i.auth_info.profile.full_name),_.isEmpty(o.ngDialogData)||(i.userData.orderUID=o.ngDialogData.orderUID),i.requestSuccess=!1,i.submit=function(t){i.userData.formType=t,e.process("user.contact.process",i).success(function(e){a.processResponse(e,null,function(){i.userData="",CKEDITOR.instances.message.setData(""),2==i.userData.formType?o.closeThisDialog():$(".lw-form").slideUp(),i.requestSuccess=!0})})},i.closeDialog=function(){o.closeThisDialog()}}angular.module("UserApp.contact",[]).controller("UserContactController",["__Form","$state","appServices","__Utils","__Auth","$scope",e])}(),function(){"use strict";angular.module("UserApp.profile",[]).controller("UserProfileController",["__Form","appServices",function(e,t){var a=this;a=e.setup(a,"user_profile__form","profileData"),a.request_completed=!1,e.fetch("user.profile.details").success(function(s){t.processResponse(s,null,function(){e.updateModel(a,s.data.profile),a.request_completed=!0})})}])}(),function(){"use strict";angular.module("UserApp.profileEdit",[]).controller("UserProfileEditController",["__Form","appServices",function(e,t){var a=this;a=e.setup(a,"user_profile_edit_form","profileData"),a.request_completed=!1,e.fetch("user.profile.details").success(function(s){t.processResponse(s,null,function(){e.updateModel(a,s.data.profile),a.request_completed=!0})}),a.submit=function(){e.process("user.profile.update",a).success(function(e){t.processResponse(e,null,function(){})})}}])}(),function(){"use strict";function e(e,t,a,s,r,o){var i=this;i=t.setup(i,"user_address_form","userData",{secured:!1}),i.addressType=__globals.getAppJSItem("configGetAddressType"),i.countriesCollection=__globals.getAppJSItem("countries"),i.countries=i.countriesCollection.data.countries,i.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),i.submit=function(){t.process("user.address.process",i).success(function(t){s.processResponse(t,null,function(){e.closeThisDialog({address_added:!0,selectedAddressID:e.ngDialogData.selectedAddressID,addressType:e.ngDialogData.addressType})})})},i.close=function(){e.closeThisDialog({address_added:!0,selectedAddressID:e.ngDialogData.selectedAddressID,addressType:e.ngDialogData.addressType})}}angular.module("UserApp.address",[]).controller("UserAddressAddController",["$scope","__Form","$state","appServices","__Utils","$rootScope",e])}(),function(){"use strict";function e(e,t,a,s,r,o,i){var n=this;n=s.setup(n,"user_address_form","addressData"),n.ngDialogData=e.ngDialogData,n.pageStatus=!1,n.getAddresses=function(){a.fetch("user.get.addresses").success(function(e){r.processResponse(e,null,function(t){var a=e.data;if(a.getRoute===document.location.href)var s="noDialog";else{var s="dialog";n.selectAddress=n.ngDialogData.selectedAddressID,n.addressType=n.ngDialogData.addressType,n.addressSameAs=n.ngDialogData.addressSameAs,n.couponAmt=n.ngDialogData.couponAmt}n.addressData=a,n.pageStatus=!0,n.addressprimary=!0,n.pageType=s,_.isEmpty(n.ngDialogData)?(n.selectAddress="",n.addressType="",n.addressSameAs="",n.couponAmt=0):(n.selectAddress=n.ngDialogData.selectedAddressID,n.addressType=n.ngDialogData.addressType,n.addressSameAs=n.ngDialogData.addressSameAs,n.couponAmt=n.ngDialogData.couponAmt)})})},n.getAddresses(),i.$on("changeAddresses",function(e,t){t.status&&(n.addressType=t.addressType)}),n.addAddress=function(t,a,s){"dialog"==t?e.closeThisDialog({showAddDialog:!0,pageType:t,selectedAddressID:a,addressType:s}):r.showDialog(n,{templateUrl:__globals.getTemplateURL("user.add-address")},function(e){_.has(e.value,"address_added")&&!0===e.value.address_added&&(n.addressType=e.value.addressType,n.getAddresses())})},n.editAddress=function(t,s,o,i){"dialog"==t?e.closeThisDialog({showEditDialog:!0,addressID:s,selectedAddressID:o,addressType:i}):a.fetch({apiURL:"user.fetch.address.support.data",addressID:s}).success(function(e){n.address=e.data.address,r.showDialog(n,{templateUrl:__globals.getTemplateURL("user.edit-address")},function(e){_.has(e.value,"address_updated")&&1==e.value.address_updated&&n.getAddresses()})})},n.delete=function(e,t){__globals.showConfirmation({text:__globals.getJSString("address_delete_text"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){a.post({apiURL:"user.address.delete",addressID:e}).success(function(a){var s=a.data.message,o={status:!0,addressType:t,addressID:e};r.processResponse(a,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:s,type:"error"})}},function(t){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:s,type:"success"}),$("#address_"+e).fadeOut("slow",function(){$(this).remove(),n.getAddresses()}),i.$emit("changeAddress",o)})})})},n.close=function(){var t={status:!1};i.$emit("changeAddress",t),e.closeThisDialog({address_list:!0})},n.primaryAddress=function(e,t,a){n.addressData.primary=t,n.updateURL={apiURL:"user.get primary.address",addressID:e},s.process(n.updateURL,n).success(function(e){e.data.message;r.processResponse(e,null,function(e){n.getAddresses()})})},n.selectAddressForOrder=function(t,s,o){a.fetch({apiURL:"user.get.address.for.order",addressID:t,couponAmt:n.couponAmt}).success(function(t){r.processResponse(t,null,function(a){var r={status:!0,addressSameAs:o,responseData:t.data,addressType:s,totalOrder:t.data.shipping};if("billing"==s){var n={status:!1,addressType:"billing",totalOrder:t.data.shipping};i.$emit("changeAddress",n)}i.$emit("changeAddressInOrder",r),e.closeThisDialog({address_list:!0})})})}}angular.module("UserApp.Addresslist",[]).controller("UserAddressListController",["$scope","$state","__DataStore","__Form","appServices","__Utils","$rootScope",e])}(),function(){"use strict";function e(e,t,a,s,r){var o=this;o=t.setup(o,"user_address_edit_form","addressData"),o.addressID=__globals.getAppJSItem("addressID"),o.loadSelectBox=!1,o.addressType=__globals.getAppJSItem("configGetAddressType"),o.countriesCollection=__globals.getAppJSItem("countries"),o.countries=o.countriesCollection.data.countries,o.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),_.isEmpty(o.addressID)?(o.addressData=e.ngDialogData.address,_.isEmpty(o.addressData)||(o.loadSelectBox=!0),o.addressID=o.addressData.id,o.getRoute=""):(o.addressID=o.addressData.id,o=t.updateModel(o,__globals.getAppJSItem("addressData")),o.getRoute=__globals.getAppJSItem("getRoute")),o.update=function(){o.updateURL={apiURL:"user.address.update",addressID:o.addressID},t.process(o.updateURL,o).success(function(t){a.processResponse(t,function(t){1==t&&e.closeThisDialog({address_updated:!0,selectedAddressID:e.ngDialogData.selectedAddressID})})})},o.close=function(){e.closeThisDialog({address_updated:!0,selectedAddressID:e.ngDialogData.selectedAddressID})}}angular.module("UserApp.editAddress",[]).controller("UserAddressEditController",["$scope","__Form","appServices","__Utils","$state",e])}(),function(){"use strict";angular.module("UserApp.resendActivationEmail",[]).controller("UserResendActivationEmailController",["__Form","appServices","__Utils",function(e,t,a){var s=this;s=e.setup(s,"form_user_resend_activation_email","userData",{secured:!1}),s.submit=function(){e.process("user.resend.activation.email.proccess",s).success(function(e){t.processResponse(e,null,function(){window.location=a.apiURL("user.resend_activation_email.success")})})}}])}();